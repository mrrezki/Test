(self.webpackChunk_jupyterlab_git=self.webpackChunk_jupyterlab_git||[]).push([[703],{5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},862:(e,t,i)=>{var r=i(8).default;function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var i={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=l?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i},e.exports.default=e.exports,e.exports.__esModule=!0},8:e=>{function t(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},5996:(e,t,i)=>{"use strict";var r=i(5318),n=i(862);t.Z=void 0;var l=n(i(6271)),o=(0,r(i(2108)).default)(l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=o},2108:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=i(8546)},8715:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var r=i(1253),n=i(2122),l=i(6271),o=(i(5697),i(6010)),s=i(9693),a=i(4670),f=i(9895),u=i(3786);const d=(0,u.Z)(l.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),c=(0,u.Z)(l.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),h=(0,u.Z)(l.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),p=(0,u.Z)(l.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),g=(0,u.Z)(l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var m=i(7812),y=i(3871),D={success:l.createElement(d,{fontSize:"inherit"}),warning:l.createElement(c,{fontSize:"inherit"}),error:l.createElement(h,{fontSize:"inherit"}),info:l.createElement(p,{fontSize:"inherit"})},b=l.createElement(g,{fontSize:"small"}),C=l.forwardRef((function(e,t){var i=e.action,s=e.children,a=e.classes,u=e.className,d=e.closeText,c=void 0===d?"Close":d,h=e.color,p=e.icon,g=e.iconMapping,C=void 0===g?D:g,w=e.onClose,_=e.role,v=void 0===_?"alert":_,M=e.severity,S=void 0===M?"success":M,E=e.variant,k=void 0===E?"standard":E,O=(0,r.Z)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return l.createElement(f.Z,(0,n.Z)({role:v,square:!0,elevation:0,className:(0,o.Z)(a.root,a["".concat(k).concat((0,y.Z)(h||S))],u),ref:t},O),!1!==p?l.createElement("div",{className:a.icon},p||C[S]||D[S]):null,l.createElement("div",{className:a.message},s),null!=i?l.createElement("div",{className:a.action},i):null,null==i&&w?l.createElement("div",{className:a.action},l.createElement(m.Z,{size:"small","aria-label":c,title:c,color:"inherit",onClick:w},b)):null)}));const w=(0,a.Z)((function(e){var t="light"===e.palette.type?s._j:s.$n,i="light"===e.palette.type?s.$n:s._j;return{root:(0,n.Z)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:i(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:i(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:i(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:i(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiAlert"})(C)},7266:(e,t,i)=>{var r="undefined"!=typeof JSON?JSON:i(8418);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var i=t.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var o,s="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},f=t.cmp&&(o=t.cmp,function(e){return function(t,i){var r={key:t,value:e[t]},n={key:i,value:e[i]};return o(r,n)}}),u=[];return function e(t,o,d,c){var h=i?"\n"+new Array(c+1).join(i):"",p=i?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=a.call(t,o,d))){if("object"!=typeof d||null===d)return r.stringify(d);if(n(d)){for(var g=[],m=0;m<d.length;m++){var y=e(d,m,d[m],c+1)||r.stringify(null);g.push(h+i+y)}return"["+g.join(",")+h+"]"}if(-1!==u.indexOf(d)){if(s)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(d);var D=l(d).sort(f&&f(d));for(g=[],m=0;m<D.length;m++){var b=e(d,o=D[m],d[o],c+1);if(b){var C=r.stringify(o)+p+b;g.push(h+i+C)}}return u.splice(u.indexOf(d),1),"{"+g.join(",")+h+"}"}}({"":e},"",e,0)};var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},l=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var r in e)t.call(e,r)&&i.push(r);return i}},8418:(e,t,i)=>{t.parse=i(1396),t.stringify=i(6177)},1396:e=>{var t,i,r,n,l={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:r}},s=function(e){return e&&e!==i&&o("Expected '"+e+"' instead of '"+i+"'"),i=r.charAt(t),t+=1,i},a=function(){var e,t="";for("-"===i&&(t="-",s("-"));i>="0"&&i<="9";)t+=i,s();if("."===i)for(t+=".";s()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,s(),"-"!==i&&"+"!==i||(t+=i,s());i>="0"&&i<="9";)t+=i,s();if(e=+t,isFinite(e))return e;o("Bad number")},f=function(){var e,t,r,n="";if('"'===i)for(;s();){if('"'===i)return s(),n;if("\\"===i)if(s(),"u"===i){for(r=0,t=0;t<4&&(e=parseInt(s(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof l[i])break;n+=l[i]}else n+=i}o("Bad string")},u=function(){for(;i&&i<=" ";)s()};n=function(){switch(u(),i){case"{":return function(){var e,t={};if("{"===i){if(s("{"),u(),"}"===i)return s("}"),t;for(;i;){if(e=f(),u(),s(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=n(),u(),"}"===i)return s("}"),t;s(","),u()}}o("Bad object")}();case"[":return function(){var e=[];if("["===i){if(s("["),u(),"]"===i)return s("]"),e;for(;i;){if(e.push(n()),u(),"]"===i)return s("]"),e;s(","),u()}}o("Bad array")}();case'"':return f();case"-":return a();default:return i>="0"&&i<="9"?a():function(){switch(i){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}o("Unexpected '"+i+"'")}()}},e.exports=function(e,l){var s;return r=e,t=0,i=" ",s=n(),u(),i&&o("Syntax error"),"function"==typeof l?function e(t,i){var r,n,o=t[i];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(n=e(o,r))?o[r]=n:delete o[r]);return l.call(t,i,o)}({"":s},""):s}},6177:e=>{var t,i,r,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,(function(e){var t=l[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function s(e,n){var l,a,f,u,d,c=t,h=n[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof r&&(h=r.call(n,e,h)),typeof h){case"string":return o(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(t+=i,d=[],"[object Array]"===Object.prototype.toString.apply(h)){for(u=h.length,l=0;l<u;l+=1)d[l]=s(l,h)||"null";return f=0===d.length?"[]":t?"[\n"+t+d.join(",\n"+t)+"\n"+c+"]":"["+d.join(",")+"]",t=c,f}if(r&&"object"==typeof r)for(u=r.length,l=0;l<u;l+=1)"string"==typeof(a=r[l])&&(f=s(a,h))&&d.push(o(a)+(t?": ":":")+f);else for(a in h)Object.prototype.hasOwnProperty.call(h,a)&&(f=s(a,h))&&d.push(o(a)+(t?": ":":")+f);return f=0===d.length?"{}":t?"{\n"+t+d.join(",\n"+t)+"\n"+c+"}":"{"+d.join(",")+"}",t=c,f}}e.exports=function(e,n,l){var o;if(t="",i="","number"==typeof l)for(o=0;o<l;o+=1)i+=" ";else"string"==typeof l&&(i=l);if(r=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return s("",{"":e})}},8892:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitMergeDecisionsOnChunks=void 0;const r=i(4632),n=i(1604),l=i(8439);function o(e){for(let t of e)if(l.hasEntries(t))return!0;return!1}function s(e){let t=[];for(let i of e){let e,r=i.key;t.push(r),"addrange"===i.op||("removerange"===i.op?(e=r+i.length,t.push(e)):"patch"===i.op&&(e=r+1,t.push(e)))}return t.filter(l.unique)}function a(e,t){let i=[];if(!Array.isArray(t))throw new Error;let n=0;for(let o of e)if(l.valueIn(o.op,["addrange","patch"]))i.push(o);else{if("removerange"!==o.op)throw new Error("Unhandled diff entry op "+o.op);for(;t[n]<o.key;)n+=1;if(t[n]!==o.key)throw new Error;for(;n<t.length-1&&t[n+1]<=o.key+o.length;)i.push(r.opRemoveRange(t[n],t[n+1]-t[n])),n+=1}return i}function f(e,t){let i=[0,e.length];for(let e of t)if(l.hasEntries(e)){let t=s(e);i=i.concat(t)}i=i.filter(l.unique).sort();let r=[];for(let e of t)l.hasEntries(e)?r.push(a(e,i)):r.push(e);return function(e,t){let i=Array.apply(null,Array(t.length)).map(Number.prototype.valueOf,0),r=[];for(let n=0;n<e.length;++n){let l=e[n],s=n<e.length-1?e[n+1]:l,a=[];for(let e=0;e<t.length;++e){let r=t[e],n=[];for(;r&&i[e]<r.length&&r[i[e]].key===l;)n.push(r[i[e]]),i[e]+=1;a.push(n)}if(o(a)){let e={baseStart:l,baseEnd:s,diffs:a};r.push(e)}}return r}(i,r)}function u(e,t,i){if(i.length<2)return[t];let r=[];for(let o of i){let i=t.customDiff;l.hasEntries(i)&&(t.localPath.length>0&&(i=n.pushPath(i,t.localPath)),i=a(i,[0,e.length,o.baseStart,o.baseEnd].filter(l.unique).sort())),r.push(new n.MergeDecision(t.absolutePath.slice(),o.diffs[0],o.diffs[1],t.action,t.conflict))}return r}t.splitMergeDecisionsOnChunks=function(e,t){let i=[];for(let r of t){let t=f(e,[n.buildDiffs(e,[r],"local"),n.buildDiffs(e,[r],"remote")]);i=i.concat(u(e,r,t))}return i}},5004:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelSource=t.lineToNormalChunks=t.LineChunker=t.Chunker=t.Chunk=void 0;const r=i(8439);class n{constructor(e,t,i,r,n){this.baseFrom=e,this.baseTo=t,this.remoteFrom=i,this.remoteTo=r,this.sources=n?[n]:[]}inEdit(e){return e>=this.baseFrom&&e<=this.baseTo}inOrig(e){return e>=this.remoteFrom&&e<=this.remoteTo}}t.Chunk=n;class l{constructor(){this._currentGhost=null,this.chunks=[],this.editOffset=0}_getCurrent(){return this._currentGhost?(this._currentGhost=null,null):this.chunks.length>0?this.chunks[this.chunks.length-1]:null}_overlapChunk(e,t,i){return i?e.inOrig(t.from.line):e.inEdit(t.from.line)}addDiff(e,t){let i=e.to.line-e.from.line;e.endsOnNewline&&(i+=1);const l=0===e.from.ch&&i>0,o=e.chunkStartLine?0:1,s=e.chunkStartLine&&e.endsOnNewline&&l?0:1;let a=this._getCurrent();if(a&&(t?this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+s+i),a.baseTo=Math.max(a.baseTo,e.from.line+s+this.editOffset),e.source&&!r.valueIn(e.source,a.sources)&&a.sources.push(e.source)):a=null:this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+s-this.editOffset),a.baseTo=Math.max(a.baseTo,e.from.line+s+i),e.source&&!r.valueIn(e.source,a.sources)&&a.sources.push(e.source)):a=null),!a){if(t){let t=e.from.line,r=t+this.editOffset;a=new n(r+o,r+s,t+o,t+s+i)}else{let t=e.from.line,r=t-this.editOffset;a=new n(t+o,t+s+i,r+o,r+s)}e.source&&a.sources.push(e.source),this.chunks.push(a)}a.sources=a.sources.filter(r.unique),this.editOffset+=t?-i:i}addGhost(e,t,i){let l=e.to.line-e.from.line;e.endsOnNewline&&(l+=1);let o=0===e.from.ch&&l>0,s=e.chunkStartLine?0:1,a=e.chunkStartLine&&e.endsOnNewline&&o?0:1;t||(a+=l);let f=this._currentGhost,u=e.from.line+(t?i:0);if(f){let t=u-this.editOffset;f.baseTo>u?(f.remoteTo=Math.max(f.remoteTo,t+a),f.baseTo=Math.max(f.baseTo,u+a),e.source&&!r.valueIn(e.source,f.sources)&&f.sources.push(e.source)):f=null}if(!f){let t=u-this.editOffset;f=new n(u+s,u+a,t+s,t+a),e.source&&f.sources.push(e.source),this.chunks.push(f)}this._currentGhost=f,f.sources=f.sources.filter(r.unique)}}t.Chunker=l,t.LineChunker=class extends l{_overlapChunk(e,t,i){let r=t.from.line;return(e.baseFrom!==e.baseTo||e.remoteFrom>=e.remoteTo)&&(r+=1),i?e.inOrig(r):e.inEdit(r)}},t.lineToNormalChunks=function(e){let t=null,i=[];for(let n of e)null===t?t=r.shallowCopy(n):t.inEdit(n.baseFrom)?(t.remoteTo=Math.max(t.remoteTo,n.remoteTo),t.baseTo=Math.max(t.baseTo,n.baseTo),t.sources=t.sources.concat(n.sources)):(i.push(t),t=r.shallowCopy(n)),t.sources=t.sources.filter(r.unique);return null!==t&&i.push(t),i},t.labelSource=function e(t,i){if(t)for(let r of t)r.source=i,"patch"===r.op&&e(r.diff,i);return t}},8049:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(5004),t),n(i(8892),t)},3788:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollapsiblePanel=void 0;const r=i(6510),n="jp-CollapsiblePanel-header-icon",l="jp-CollapsiblePanel-header-icon-opened",o="jp-CollapsiblePanel-header-icon-closed",s="jp-CollapsiblePanel-opened",a="jp-CollapsiblePanel-closed";class f extends r.Panel{constructor(e,t,i){super(),this.addClass("jp-CollapsiblePanel"),this.inner=e;let f=this.constructor.createHeader(t);this.header=f,this.button=f.node.getElementsByClassName(n)[0],f.node.onclick=this.toggleCollapsed.bind(this),this.addWidget(f),this.container=new r.Panel,this.container.addClass("jp-CollapsiblePanel-container"),this.slider=new r.Panel,this.slider.addClass("jp-CollapsiblePanel-slider"),this.slider.addWidget(e),this.container.addWidget(this.slider),this.addWidget(this.container),this.slider.addClass(!0===i?a:s),this.button.classList.add(!0===i?o:l),this.button.classList.add("fa"),this.button.classList.add(!0===i?"fa-caret-down":"fa-caret-up")}static createHeader(e){let t=new r.Panel;t.addClass("jp-CollapsiblePanel-header"),e&&(t.node.innerText=e);let i=document.createElement("button");return i.className=n,t.node.appendChild(i),t}toggleCollapsed(){let e=this.slider,t=this.button;this.collapsed?(e.removeClass(a),e.addClass(s),t.classList.remove(o),t.classList.add(l),this.button.classList.remove("fa-caret-down"),this.button.classList.add("fa-caret-up")):(e.removeClass(s),e.addClass(a),t.classList.remove(l),t.classList.add(o),this.button.classList.remove("fa-caret-up"),this.button.classList.add("fa-caret-down"))}get collapsed(){return this.slider.hasClass(a)}set headerTitle(e){this.header.node.innerText=e}}t.CollapsiblePanel=f},4291:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorWidget=void 0;const r=i(2502),n=i(2036);class l extends r.CodeEditorWrapper{constructor(e,t){t&&t.readOnly&&(t.extraKeys={Tab:!1,"Shift-Tab":!1}),super({model:new r.CodeEditor.Model({value:e}),factory:function(){let e=new n.CodeMirrorEditorFactory(t);return e.newInlineEditor.bind(e)}()}),this.staticLoaded=!1,l.editors.push(this.cm)}get cm(){return this.editor.editor}get doc(){return this.editor.doc}onResize(e){this.staticLoaded||(e.width<0||e.height<0?this.cm.setSize(null,null):super.onResize(e),this.editor.getOption("readOnly")&&document.contains(this.node)&&(this.staticLoaded=!0))}}t.EditorWidget=l,l.editors=[]},1156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyUserError=void 0;class i extends Error{constructor(e,t="error"){super(e),Object.setPrototypeOf(this,i.prototype),this.message=e,this.stack=(new Error).stack,this.severity=t}}t.NotifyUserError=i},111:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergeView=t.DiffView=t.createNbdimeMergeView=t.EventDirection=t.DIFF_OP=void 0;const r=i(8681),n=i(6510),l=i(5118),o=i(8049),s=i(4291),a=i(8439),f=i(1156);var u,d;!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(u=t.DIFF_OP||(t.DIFF_OP={})),function(e){e[e.INCOMING=0]="INCOMING",e[e.OUTGOING=1]="OUTGOING"}(d=t.EventDirection||(t.EventDirection={}));const c="jp-Merge-gutter-picker",h="jp-Merge-gutter-conflict",p="jp-Merge-conflict",g={chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect",gutter:"CodeMirror-merge-l-gutter"},m={chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect",gutter:"CodeMirror-merge-r-gutter"},y={chunk:"CodeMirror-merge-m-chunk",start:"CodeMirror-merge-m-chunk-start",end:"CodeMirror-merge-m-chunk-end",insert:"CodeMirror-merge-m-inserted",del:"CodeMirror-merge-m-deleted",connect:"CodeMirror-merge-m-connect",gutter:"CodeMirror-merge-m-gutter"};t.createNbdimeMergeView=function(e,t,i,r){let n=new S({remote:e,local:t,merged:i,readOnly:r,orig:null,collapseIdentical:!0}),l=[];n.left&&l.push(n.left),n.right&&l.push(n.right),n.merge&&l.push(n.merge);let o=(e||i).mimetype;if(o){for(let e of l)e.ownWidget.model.mimeType=o;n.base.model.mimeType=o}return n};class D{constructor(e,t,i,r){this.collapsedRanges=[],this.model=e,this.type=t,this.updateCallback=i,this.classes="left"===t?g:"right"===t?m:null;let n=this.model.remote||"";this.ownWidget=new s.EditorWidget(n,a.copyObj({readOnly:!!r.readOnly},r)),this.showDifferences=!1!==r.showDifferences}init(e){this.baseEditor=e,(this.baseEditor.state.diffViews||(this.baseEditor.state.diffViews=[])).push(this),this.ownEditor.state.diffViews=[this],this.baseEditor.on("gutterClick",this.onGutterClick.bind(this)),this.ownEditor.on("gutterClick",this.onGutterClick.bind(this)),this.lineChunks=this.model.getLineChunks(),this.chunks=o.lineToNormalChunks(this.lineChunks),this.dealigned=!1,this.forceUpdate=this.registerUpdate(),this.setScrollLock(!0,!1),this.registerScroll()}setShowDifferences(e){(e=!1!==e)!==this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}syncModel(){if(this.modelInvalid()){let e=this.ownEditor,t=this.model.getLineChunks(),i=o.lineToNormalChunks(t);if(this.model.remote===e.getValue())return this.lineChunks=t,void(this.chunks=i);let n,l,s=e.getDoc().getCursor(),f=a.splitLines(this.model.remote),u=e.getDoc().firstLine(),d=e.getDoc().lastLine()+1,c=0;for(let t of this.collapsedRanges){let o=t.line;n=w(o,this.chunks),l=w(o,i);let s=l-n;n===u&&0===s||e.getDoc().replaceRange(f.slice(u+c,l+c-1).join(""),r.Pos(u,0),r.Pos(n-1,0),"syncModel"),c+=s,u=n+t.size}u<d&&e.getDoc().replaceRange(f.slice(u,f.length).join(""),r.Pos(u,0),r.Pos(d,0),"syncModel"),this.ownEditor.getDoc().setCursor(s),this.lineChunks=t,this.chunks=i}}buildGap(){let e=this.lockButton=P("div",void 0,"CodeMirror-merge-scrolllock");e.title="Toggle locked scrolling";let t=P("div",[e],"CodeMirror-merge-scrolllock-wrap"),i=this;return r.on(e,"click",(function(){i.setScrollLock(!i.lockScroll)})),this.gap=P("div",[t],"CodeMirror-merge-gap")}setScrollLock(e,t){this.lockScroll=e,e&&!1!==t&&this.syncScroll(d.OUTGOING),this.lockButton&&(this.lockButton.innerHTML=e?"⇛⇚":"⇛&nbsp;&nbsp;⇚")}registerUpdate(){let e,t=[],i=[],r=this;function n(e){r.updating=!0,r.updatingFast=!1,"full"===e&&(r.syncModel(),null===r.classes?(b(r.baseEditor,t),b(r.ownEditor,i)):(C(r.baseEditor,t,r.classes),C(r.ownEditor,i,r.classes))),r.showDifferences&&(r.updateMarks(r.ownEditor,r.model.additions,t,u.DIFF_INSERT),r.updateMarks(r.baseEditor,r.model.deletions,i,u.DIFF_DELETE)),r.updateCallback(!0),function(e){if(r.model.remote!==e.getValue())throw new f.NotifyUserError("CRITICAL: Merge editor out of sync with model! Double-check any saved merge output!")}(r.ownEditor),r.updating=!1}function s(e){let t=!1;for(let e of r.baseEditor.state.diffViews)t=t||e.updating;t||(r.dealigned=!0,a(!0===e))}function a(t){let i=!1;for(let e of r.baseEditor.state.diffViews)i=i||e.updating||e.updatingFast;i||(clearTimeout(e),!0===t&&(r.updatingFast=!0),e=window.setTimeout(n,!0===t?20:250))}function d(e,t){r.model instanceof l.DecisionStringDiffModel||(r.lineChunks=r.model.getLineChunks(),r.chunks=o.lineToNormalChunks(r.lineChunks)),s(t.text.length-1!=t.to.line-t.from.line)}return r.updating=!1,r.updatingFast=!1,this.baseEditor.on("change",d),this.ownEditor.on("change",d),this.baseEditor.on("markerAdded",s),this.baseEditor.on("markerCleared",s),this.ownEditor.on("markerAdded",s),this.ownEditor.on("markerCleared",s),this.baseEditor.on("viewportChange",(function(){a(!1)})),this.ownEditor.on("viewportChange",(function(){a(!1)})),n(),n}modelInvalid(){return this.model instanceof l.DecisionStringDiffModel&&this.model.invalid}onGutterClick(e,t,i,r){if(0!==r.button)return;let n=e.lineInfo(t);if(!n.gutterMarkers||!n.gutterMarkers.hasOwnProperty(i))return;let o=n.gutterMarkers[i];if(o&&o.sources){let r=o.sources;if(i===c){if(e===this.ownEditor)for(let e of r)e.decision.action=e.action;else if("merge"===this.type&&e===this.baseEditor)for(let e of r)e.decision.action="base";for(let e=r.length-1;e>=0;--e){let t=r[e];"merge"===this.type&&a.hasEntries(t.decision.customDiff)&&(t.decision.customDiff=[])}0===r.length&&e.setGutterMarker(t,c,null)}else if(i===h)for(let e of r)e.decision.conflict=!1;for(let e of this.baseEditor.state.diffViews)e.model instanceof l.DecisionStringDiffModel&&e.model.invalidate(),e.forceUpdate("full")}}registerScroll(){let e=this;this.baseEditor.on("scroll",(function(){e.syncScroll(d.OUTGOING)})),this.ownEditor.on("scroll",(function(){e.syncScroll(d.INCOMING)}))}syncScroll(e){if(this.modelInvalid())return;if(!this.lockScroll)return;let t,i;if(e===d.OUTGOING?(t=this.baseEditor,i=this.ownEditor):(t=this.ownEditor,i=this.baseEditor),t.state.scrollSetBy===this)return void(t.state.scrollSetBy=null);if(i.state.scrollPosition=t.getScrollInfo(),i.state.scrollTicking)return;let r=i.getScrollInfo();if(i.state.scrollPosition.top===r.top&&i.state.scrollPosition.left===r.left)return;let n=this;window.requestAnimationFrame((function(){i.scrollTo(i.state.scrollPosition.left,i.state.scrollPosition.top),i.state.scrollTicking=!1,i.state.scrollSetBy=n})),i.state.scrollTicking=!0}updateMarks(e,t,i,r){let n;n=null===this.classes?a.copyObj(y):this.classes;let l=this;function o(e,t,r,o){if(null===l.classes&&o.length>0){n=a.copyObj(y);let e=o[0].action;if(o.length>1)for(let t of o.slice(1))if(t.action!==e){e="mixed";break}for(let t of Object.keys(n))n[t]+="-"+e}let s=!1;if(o.length>0)for(let e of o)if(e.decision.conflict){s=!0;break}for(let f=t;f<r;++f){let u=e.addLineClass(f,"background",n.chunk);if(s&&e.addLineClass(u,"background",p),f===t)if(e.addLineClass(u,"background",n.start),"merge"!==l.type){let t=P("div","➭",n.gutter);t.sources=o,t.classList.add(c),e.setGutterMarker(u,c,t)}else if(e===l.baseEditor){for(let t of o)if("custom"===t.decision.action&&!a.hasEntries(t.decision.localDiff)&&!a.hasEntries(t.decision.remoteDiff)){let t=P("div","➭",n.gutter);t.sources=o,t.classList.add(c),e.setGutterMarker(u,c,t)}}else if(s&&e===l.ownEditor){let t=P("div","⚠","");t.sources=o,t.classList.add(h),e.setGutterMarker(u,h,t)}f===r-1&&e.addLineClass(u,"background",n.end),i.push(u)}if(t===r){let r=e.addLineClass(t,"background",n.start);if("merge"!==l.type){let t=P("div","➭",n.gutter);t.sources=o,t.classList.add(c),e.setGutterMarker(r,c,t)}else if(s){let t=P("div","⚠","");t.sources=o,t.classList.add(h),e.setGutterMarker(r,h,t)}e.addLineClass(r,"background",n.end+"-empty"),i.push(r)}}let s=r===u.DIFF_DELETE?n.del:n.insert;e.operation((function(){let r=e===l.baseEditor;l.classes?C(e,i,n):b(e,i),function(e,t,i,r){let n=e.getDoc(),l=null;a.valueIn(r,[y.del,y.insert])&&(l=r);for(let e of t)null!==l&&(r=l+(e.source?"-"+e.source.action:"")),i.push(n.markText(e.from,e.to,{className:r}))}(e,t,i,s);for(let t of l.chunks)r?o(e,t.baseFrom,t.baseTo,t.sources):o(e,t.remoteFrom,t.remoteTo,t.sources)}))}get ownEditor(){return this.ownWidget.cm}}function b(e,t){for(let i of["-local","-remote","-either","-custom"]){let r=a.copyObj(y);for(let e of Object.keys(r))r[e]+=i;C(e,t,r)}}function C(e,t,i){for(let r=t.length-1;r>=0;--r){let n=t[r];if("clear"in n)n.clear(),t.splice(r,1);else if(n.parent){e.removeLineClass(n,"background",i.chunk),e.removeLineClass(n,"background",i.start),e.removeLineClass(n,"background",i.end),e.removeLineClass(n,"background",p),a.valueIn(i.gutter,[g.gutter,m.gutter])?e.setGutterMarker(n,c,null):e.setGutterMarker(n,h,null);let l=e.lineInfo(n);l.bgClass&&0!==l.bgClass.length||t.splice(r,1)}}}function w(e,t){let i=0;for(let r=0;r<t.length;r++){let n=t[r];if(n.baseTo>e&&n.baseFrom<=e)return 0;if(n.baseFrom>e)break;i=n.remoteTo-n.baseTo}return e+i}function _(e,t){let i=e.baseFrom;for(let e=0;e<t.length;++e){let r=t[e];if(r.baseFrom===i)return r.remoteTo;if(r.baseFrom>i)break}return e.baseTo}function v(e,t,i){let r=0,n=[];for(let i=0;i<e.length;i++)if(null!==t[i]){let l=e[i].heightAtLine(t[i],"local");n[i]=l,r=Math.max(r,l)}for(let l=0;l<e.length;l++)if(null!==t[l]){let o=r-n[l];o>1&&i.push(M(e[l],t[l],o))}}function M(e,t,i){let r=!0;t>e.getDoc().lastLine()&&(t--,r=!1);let n=document.createElement("div");return n.className="CodeMirror-merge-spacer",n.style.height=i+"px",n.style.minWidth="1px",e.addLineWidget(t,n,{height:i,above:r})}t.DiffView=D;class S extends n.Panel{constructor(e){super(),this.initialized=!1,this.collapsedRanges=[],this.options=e;let t=e.remote,i=e.local||null,r=e.merged||null,l=0,o=this.left=null,f=this.right=null,u=this.merge=null,d=this;this.diffViews=[],this.aligners=[];let p=e.remote||e.merged;if(!p)throw new Error("Either remote or merged model needs to be specified!");e.value=null!==p.base?p.base:p.remote,e.lineNumbers=!1!==e.lineNumbers;let g=e.readOnly;e.readOnly=!0;let m=e;if(r&&(e.gutters=[h,c],void 0===e.lineWrapping&&(e.lineWrapping=!1)),this.base=new s.EditorWidget(e.value,a.copyObj({readOnly:!!e.readOnly},e)),this.base.addClass("CodeMirror-merge-pane"),this.base.addClass("CodeMirror-merge-pane-base"),r){let s,d,c=!1!==e.showBase;c||(this.base.node.style.display="hidden"),i&&null!==i.remote?(o=this.left=new D(i,"left",this.alignViews.bind(this),a.copyObj(m)),this.diffViews.push(o),s=o.ownWidget):(o=this.left=null,s=new n.Widget({node:P("div","Value missing","jp-mod-missing")})),s.addClass("CodeMirror-merge-pane"),s.addClass("CodeMirror-merge-pane-local"),this.addWidget(s),c&&this.addWidget(this.base),t&&null!==t.remote?(f=this.right=new D(t,"right",this.alignViews.bind(this),a.copyObj(m)),this.diffViews.push(f),d=f.ownWidget):(f=this.right=null,d=new n.Widget({node:P("div","Value missing","jp-mod-missing")})),d.addClass("CodeMirror-merge-pane"),d.addClass("CodeMirror-merge-pane-remote"),this.addWidget(d),this.addWidget(new n.Widget({node:P("div",null,"CodeMirror-merge-clear","height: 0; clear: both;")})),u=this.merge=new D(r,"merge",this.alignViews.bind(this),a.copyObj({readOnly:g},a.copyObj(m))),this.diffViews.push(u);let h=u.ownWidget;h.addClass("CodeMirror-merge-pane"),h.addClass("CodeMirror-merge-pane-final"),this.addWidget(h),l=3+(c?1:0)}else if(t){if(this.addWidget(this.base),t.unchanged||t.added||t.deleted)t.unchanged?this.base.addClass("CodeMirror-merge-pane-unchanged"):t.added?this.base.addClass("CodeMirror-merge-pane-added"):t.deleted&&this.base.addClass("CodeMirror-merge-pane-deleted"),l=1;else{f=this.right=new D(t,"right",this.alignViews.bind(this),m),this.diffViews.push(f);let e=f.ownWidget;e.addClass("CodeMirror-merge-pane"),e.addClass("CodeMirror-merge-pane-remote"),this.addWidget(new n.Widget({node:f.buildGap()})),this.addWidget(e),l=2}this.addWidget(new n.Widget({node:P("div",null,"CodeMirror-merge-clear","height: 0; clear: both;")}))}this.addClass("CodeMirror-merge"),this.addClass("CodeMirror-merge-"+l+"pane");for(let e of[o,f,u])e&&e.init(this.base.cm);e.collapseIdentical&&l>1&&this.base.cm.operation((function(){!function(e,t){"number"!=typeof t&&(t=2);let i=[],r=e.base.cm,n=r.getDoc().firstLine();for(let e=n,t=r.getDoc().lastLine();e<=t;e++)i.push(!0);e.left&&O(e.left,t,n,i),e.right&&O(e.right,t,n,i),e.merge&&O(e.merge,t,n,i),e.collapsedRanges=[];for(let l=0;l<i.length;l++)if(i[l]){let o=l+n,s=1;for(;l<i.length-1&&i[l+1];l++,s++);if(s>t){let t=[{line:o,cm:r}];e.left&&t.push({line:w(o,e.left.chunks),cm:e.left.ownEditor}),e.right&&t.push({line:w(o,e.right.chunks),cm:e.right.ownEditor}),e.merge&&t.push({line:w(o,e.merge.chunks),cm:e.merge.ownEditor});let i=k(s,t);e.collapsedRanges.push({line:o,size:s}),i.on("clear",(()=>{for(let t=0;t<e.collapsedRanges.length;++t)if(e.collapsedRanges[t].line===o)return void e.collapsedRanges.splice(t,1)})),e.options.onCollapse&&e.options.onCollapse(e,o,s,i)}}}(d,e.collapseIdentical)}));for(let e of[o,f,u])e&&(e.collapsedRanges=this.collapsedRanges);this.initialized=!0,(this.left||this.right||this.merge)&&this.alignViews(!0)}alignViews(e){let t=!1;if(!this.initialized)return;for(let e of this.diffViews)e.syncModel(),e.dealigned&&(t=!0,e.dealigned=!1);if(!t&&!e)return;let i=function(e){let t=[],i=[],r=e[0],n=e.slice(1);for(let e=0;e<r.lineChunks.length;e++){let l=r.lineChunks[e],o=[l.baseTo,l.remoteTo];for(let e of n)o.push(_(l,e.lineChunks));if(t.length>0&&t[t.length-1][0]===o[0]){let e=t[t.length-1];for(let t=0;t<o.length;++t)e[t]=Math.max(e[t],o[t])}else if(t.length>0){let e=t[t.length-1],r=o[0]-e[0];for(let t=1;t<o.length;++t)if(r!==o[t]-e[t]){r=null;break}if(null!==r){i.push(o[0]);continue}t.push(o)}else t.push(o)}for(let e=0;e<n.length;e++)for(let l=0;l<n[e].lineChunks.length;l++){let o=n[e].lineChunks[l],s=0;for(;s<t.length;s++){let e=t[s];if(a.valueIn(o.baseTo,i)){s=-1;break}if(e[0]>=o.baseTo)break}if(s>-1){let i=[o.baseTo,_(o,r.lineChunks)];for(let t=0;t<n.length;t++)t===e?i.push(o.remoteTo):i.push(_(o,n[t].lineChunks));if(t.length>s&&t[s][0]===o.baseTo){let e=t[s];for(let t=0;t<i.length;++t)e[t]=Math.max(e[t],i[t])}else t.splice(s,0,i)}}return t}(this.diffViews),r=this,n=function(){let e=r.aligners;for(let t=0;t<e.length;t++)e[t].clear();e.length=0;let t=[r.base.cm],n=[];for(let e of r.diffViews)t.push(e.ownEditor);for(let e=0;e<t.length;e++)n.push(t[e].getScrollInfo().top);for(let r=0;r<i.length;r++)v(t,i[r],e);for(let e=0;e<t.length;e++)t[e].scrollTo(null,n[e])};var l;this.base.cm.curOp||(l=n,n=function(){r.base.cm.operation(l)});for(let e of this.diffViews)e.ownEditor.curOp||(n=function(t){return function(){e.ownEditor.operation(t)}}(n));n()}setShowDifferences(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)}getMergedValue(){if(!this.merge)throw new Error('No merged value; missing "merged" view');return this.merge.ownEditor.getValue()}}function E(e,t,i){e.addLineClass(t,"wrap","CodeMirror-merge-collapsed-line");let n=document.createElement("span");n.className="CodeMirror-merge-collapsed-widget",n.title="Identical text collapsed. Click to expand.";let l=e.getDoc().markText(r.Pos(t,0),r.Pos(i-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:n,clearOnEnter:!0});function o(){l.clear(),e.removeLineClass(t,"wrap","CodeMirror-merge-collapsed-line")}return r.on(n,"click",o),{mark:l,clear:o}}function k(e,t){let i=[];function r(){for(let e=0;e<i.length;e++)i[e].clear()}for(let n=0;n<t.length;n++){let l=t[n],o=E(l.cm,l.line,l.line+e);i.push(o),o.mark.on("clear",r)}return i[0].mark}function O(e,t,i,r){for(let n=0;n<e.chunks.length;n++){let l=e.chunks[n];for(let e=l.baseFrom-t;e<l.baseTo+t;e++){let t=e+i;t>=0&&t<r.length&&(r[t]=!1)}}}function P(e,t,i,r){let n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(let e=0;e<t.length;++e)n.appendChild(t[e]);return n}function x(e,t,i){for(let r=e.length-1;r>=0;r--){let n=e[r],l=(i?n.remoteTo:n.baseTo)-1;if(l<t)return l}return null}function A(e,t,i){for(let r=0;r<e.length;r++){let n=e[r],l=i?n.remoteFrom:n.baseFrom;if(l>t)return l}return null}var L;function I(e,t){let i=null,n=e.state.diffViews,l=e.getDoc().getCursor().line;if(n)for(let r=0;r<n.length;r++){let o=n[r],s=e===o.ownEditor,a=t===L.Previous?x(o.chunks,l,s):A(o.chunks,l,s);null===a||null!==i&&!(t===L.Previous?a>i:a<i)||(i=a)}if(null===i)return r.Pass;e.getDoc().setCursor(i,0)}t.MergeView=S,function(e){e[e.Previous=-1]="Previous",e[e.Next=1]="Next"}(L||(L={})),r.commands.goNextDiff=function(e){return I(e,L.Next)},r.commands.goPrevDiff=function(e){return I(e,L.Previous)}},8439:(e,t)=>{"use strict";function i(e,t){return t.indexOf(e)>=0}function r(e,t){let i=[];for(let t=0;t<e.length;++t)i.push({index:t,key:e[t]});i=i.sort(((e,i)=>t(e.key,i.key)||e.index-i.index));let r=new Array(e.length);for(let t=0;t<e.length;++t)r[t]=e[i[t].index];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.buildSelect=t.copyObj=t.stableSort=t.intersection=t.unique=t.accumulateLengths=t.repeatString=t.sortByKey=t.isPrefixArray=t.findSharedPrefix=t.arraysEqual=t.shallowCopy=t.deepCopy=t.splitLines=t.hasEntries=t.valueIn=void 0,t.valueIn=i,t.hasEntries=function(e){return null!==e&&0!==e.length},t.splitLines=function(e){return e.match(/^.*(\r\n|\r|\n|$)/gm)},t.deepCopy=function e(t){if("object"!=typeof t){if(i(typeof t,["string","number","boolean"]))return t;throw new TypeError("Cannot deepcopy non-object")}if(null===t)return null;if(Array.isArray(t)){let i=t.length,r=new Array(i);for(let n=0;n<i;n++)r[n]=e(t[n]);return r}{let i=t,r={};void 0!==i.prototype&&(r.prototype=i.prototype);for(let n in t)r[n]=e(i[n]);return r}},t.shallowCopy=function(e){let t=Object.create(Object.getPrototypeOf(e));for(let i in e){let r=e[i];if(null!=r&&r.hasOwnProperty("constructor")&&r.constructor===Function)continue;let n=Object.getOwnPropertyDescriptor(e,i);n&&!n.get&&Object.defineProperty(t,i,n)}return t},t.arraysEqual=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},t.findSharedPrefix=function(e,t){if(null===e||null===t)return null;if(e===t)return e.slice();let i=0;for(;i<Math.min(e.length,t.length)&&e[i]===t[i];++i);return e.slice(0,i)},t.isPrefixArray=function(e,t){if(e===t)return!0;if(null===e||0===e.length)return!0;if(null===t||e.length>t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},t.sortByKey=function(e,t){return r(e,(function(e,i){let r=e[t],n=i[t];return r<n?-1:r>n?1:0}))},t.repeatString=function(e,t){if(t<1)return"";let i="",r=e.valueOf();for(;t>1;)1&t&&(i+=r),t>>=1,r+=r;return i+r},t.accumulateLengths=function(e){let t=[];return e.reduce((function(e,i,r){return t[r]=e+i.length}),0),t},t.unique=function(e,t,i){return i.indexOf(e)===t},t.intersection=function(e,t){let i=[];[e,t]=e.length>t.length?[e,t]:[t,e];for(let r of e)-1!==t.indexOf(r)&&i.push(r);return i},t.stableSort=r,t.copyObj=function(e,t){t||(t={});for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.buildSelect=function(e,t){void 0===t&&(t=document.createElement("select"));for(let i of e){let e=document.createElement("option");e.value=e.innerHTML=i,t.appendChild(e)}return t}},4632:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateObjectOp=t.validateSequenceOp=t.opPatch=t.opRemoveRange=t.opAddRange=t.opRemove=t.opAdd=t.opReplace=void 0;const r=i(8439);t.opReplace=function(e,t){return{op:"replace",key:e,value:t}},t.opAdd=function(e,t){return{op:"add",key:e,value:t}},t.opRemove=function(e){return{op:"remove",key:e}},t.opAddRange=function(e,t){return{op:"addrange",key:e,valuelist:t}},t.opRemoveRange=function(e,t){return{op:"removerange",key:e,length:t}},t.opPatch=function(e,t){return{op:"patch",key:e,diff:t}},t.validateSequenceOp=function(e,t){if("number"!=typeof t.key)throw console.info("Invalid patch details",e,t),new TypeError(`Invalid patch sequence op: Key is not a number: ${t.key}`);let i=t.key;if("addrange"===t.op){if(i<0||i>e.length||isNaN(i))throw new RangeError("Invalid add range diff op: Key out of range: "+i)}else if("removerange"===t.op){if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Key out of range: "+i);if(i+t.length>e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Range too long!")}else{if("patch"!==t.op)throw new Error("Invalid op: "+t.op);if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid patch diff op: Key out of range: "+i)}},t.validateObjectOp=function(e,t,i){let n=t.op;if("string"!=typeof t.key)throw console.info("Invalid patch details",e,t,i),new TypeError(`Invalid patch object op: Key is not a string: ${t.key}`);let l=t.key;if("add"===n){if(r.valueIn(l,i))throw new Error("Invalid add key diff op: Key already present: "+l)}else if("remove"===n){if(!r.valueIn(l,i))throw new Error("Invalid remove key diff op: Missing key: "+l)}else if("replace"===n){if(!r.valueIn(l,i))throw new Error("Invalid replace key diff op: Missing key: "+l)}else{if("patch"!==n)throw new Error("Invalid op: "+n);if(!r.valueIn(l,i))throw new Error("Invalid patch key diff op: Missing key: "+l)}}},1999:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeletedCellDiffModel=t.createAddedCellDiffModel=t.createUnchangedCellDiffModel=t.createPatchedCellDiffModel=t.CellDiffModel=void 0;const r=i(616),n=i(1156),l=i(4526),o=i(8282),s=i(1716),a=i(7727);class f{constructor(e,t,i,r,l){if(this.source=e,this.metadata=t,this.outputs=i,this.executionCount=r,this.cellType=l,null===i&&"code"===l)throw new n.NotifyUserError("Invalid code cell, missing outputs!");this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Metadata changed",this.metadata.startCollapsed=!0}get unchanged(){let e=this.source.unchanged;if(e=e&&(!this.metadata||this.metadata.unchanged),this.outputs)for(let t of this.outputs)e=e&&t.unchanged;return this.executionCount&&(e=e&&this.executionCount.unchanged),e}get added(){return this.source.added}get deleted(){return this.source.deleted}getChunkedOutputs(){if(null===this.outputs)return null;const e=[];if(this.added||this.deleted)for(let t of this.outputs)e.push([t]);else{let t=[];for(let i of this.outputs)i.added||i.deleted?t.push(i):(t.length&&e.push(t),e.push([i]),t=[]);t.length&&e.push(t)}return e}}t.CellDiffModel=f,t.createPatchedCellDiffModel=function(e,t,i){let n=null,u=null,d=null,c=null,h=l.getSubDiffByKey(t,"source");if(n=h?o.createPatchStringDiffModel(e.source,h):o.createDirectStringDiffModel(e.source,e.source),o.setMimetypeFromCellType(n,e,i),h=l.getSubDiffByKey(t,"metadata"),u=h?o.createPatchStringDiffModel(e.metadata,h):o.createDirectStringDiffModel(e.metadata,e.metadata),r.isCode(e)){let i=e.outputs,r=l.getSubDiffByKey(t,"outputs");d=r?s.makeOutputModels(i,null,r):s.makeOutputModels(i,i);let n=e.execution_count,o=l.getDiffEntryByKey(t,"execution_count");c=a.createImmutableModel(n,n,o)}return new f(n,u,d,c,e.cell_type)},t.createUnchangedCellDiffModel=function(e,t){let i=o.createDirectStringDiffModel(e.source,e.source);o.setMimetypeFromCellType(i,e,t);let n=o.createDirectStringDiffModel(e.metadata,e.metadata),l=null,u=null;if(r.isCode(e)){l=s.makeOutputModels(e.outputs,e.outputs);let t=e.execution_count;u=a.createImmutableModel(t,t)}return new f(i,n,l,u,e.cell_type)},t.createAddedCellDiffModel=function(e,t){let i=o.createDirectStringDiffModel(null,e.source);o.setMimetypeFromCellType(i,e,t);let n=o.createDirectStringDiffModel(null,e.metadata),l=null,u=null;return r.isCode(e)&&(l=s.makeOutputModels(null,e.outputs),u=a.createImmutableModel(null,e.execution_count)),new f(i,n,l,u,e.cell_type)},t.createDeletedCellDiffModel=function(e,t){let i=o.createDirectStringDiffModel(e.source,null);o.setMimetypeFromCellType(i,e,t);let n=o.createDirectStringDiffModel(e.metadata,null),l=null,u=null;if(r.isCode(e)){l=s.makeOutputModels(e.outputs,null);let t=e.execution_count;u=a.createImmutableModel(t,null)}return new f(i,n,l,u,e.cell_type)}},3889:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImmutableModel=t.ImmutableDiffModel=void 0;class i{constructor(e,t,i,r,n){this.base=e,this.remote=t,this.collapsible=!0===i,this.collapsible&&(this.collapsibleHeader=r||"",this.startCollapsed=!0===n)}get unchanged(){return this.base===this.remote}get added(){return void 0===this.base}get deleted(){return void 0===this.remote}}t.ImmutableDiffModel=i,t.createImmutableModel=function(e,t,r){if(r){if("add"===r.op){if(void 0!==e)throw new Error("Invalid diff op on immutable value");return new i(e,r.value)}if("remove"===r.op){if(void 0===e)throw new Error("Invalid diff op on immutable value");return new i(e,void 0)}if(void 0===e)throw new Error("Invalid diff op on immutable value");return new i(e,r.value)}return new i(e,t)}},3127:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(1999),t),n(i(3889),t),n(i(7727),t),n(i(5487),t),n(i(1716),t),n(i(3846),t),n(i(8282),t)},5487:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDiffModel=void 0;const r=i(4526),n=i(8282),l=i(1999);t.NotebookDiffModel=class{constructor(e,t){let i,o=r.getSubDiffByKey(t,"metadata");e.metadata&&o?this.metadata=n.createPatchStringDiffModel(e.metadata,o):this.metadata=null,this.metadata&&(this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Notebook metadata changed",this.metadata.startCollapsed=!0);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=[],this.chunkedCells=[];let s=0,a=0,f=-1,u=[];for(let i of r.getSubDiffByKey(t,"cells")||[]){let t=i.key;for(let i=s;i<t;i++){let t=l.createUnchangedCellDiffModel(e.cells[i],this.mimetype);this.cells.push(t),this.chunkedCells.push([t])}if(t!==f&&(u=[],this.chunkedCells.push(u),f=t),"addrange"===i.op){for(let e of i.valuelist){let t=l.createAddedCellDiffModel(e,this.mimetype);this.cells.push(t),u.push(t)}a=0}else if("removerange"===i.op){a=i.length;for(let i=t;i<t+a;i++){let t=l.createDeletedCellDiffModel(e.cells[i],this.mimetype);this.cells.push(t),u.push(t)}}else if("patch"===i.op){u.length>0&&(u=[],this.chunkedCells.push(u));let r=l.createPatchedCellDiffModel(e.cells[t],i.diff,this.mimetype);this.cells.push(r),u.push(r),a=1}s=Math.max(s,t+a)}for(let t=s;t<e.cells.length;t++){let i=l.createUnchangedCellDiffModel(e.cells[t],this.mimetype);this.cells.push(i),this.chunkedCells.push([i])}}}},1716:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOutputModels=t.OutputDiffModel=void 0;const r=i(616),n=i(1156),l=i(3846),o=["text/plain","application/vnd.jupyter.stdout","application/vnd.jupyter.stderr"];class s extends l.RenderableDiffModel{hasMimeType(e){let t=this.base||this.remote;return r.isStream(t)&&-1!==o.indexOf(e)?"text":r.isError(t)?"traceback":(r.isExecuteResult(t)||r.isDisplayData(t))&&e in t.data?["data",e]:null}innerMimeType(e){let t=(this.base||this.remote).output_type;if("stream"===t&&"text"===e||"error"===t&&"traceback"===e)return"text/plain";if(("execute_result"===t||"display_data"===t)&&Array.isArray(e))return e[1];throw new n.NotifyUserError("Unknown MIME type for key: "+e)}stringify(e){let t=super.stringify(e);return e&&(t.mimetype=this.innerMimeType(e)),t}}t.OutputDiffModel=s,t.makeOutputModels=function(e,t,i){let r=[];if(null!==t||i)if(null===e){if(null===t)throw new Error("Either base or remote need to be specififed!");for(let e of t)r.push(new s(null,e))}else if(t===e)for(let t of e)r.push(new s(t,t));else{if(!i)throw new Error("Invalid arguments to makeOutputModels()");{let t=0,n=0;for(let l of i){let i=l.key;for(let n of e.slice(t,i))r.push(new s(n,n));if("addrange"===l.op){for(let e of l.valuelist)r.push(new s(null,e));n=0}else if("removerange"===l.op){let t=l.length;for(let n=i;n<i+t;n++)r.push(new s(e[n],null));n=t}else{if("patch"!==l.op)throw new Error("Invalid diff operation: "+l);r.push(new s(e[i],null,l.diff)),n=1}t=Math.max(t,i+n)}for(let i of e.slice(t))r.push(new s(i,i))}}else{if(null===e)throw new Error("Either base or remote need to be specififed!");for(let t of e)r.push(new s(t,null))}return r}},3846:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableDiffModel=void 0;const r=i(1797),n=i(6168),l=i(4526),o=i(8787),s=i(8282);t.RenderableDiffModel=class{constructor(e,t,i){if(this.trustedChanged=new n.Signal(this),!t&&!e)throw new Error("Either remote or base value need to be given");this.base=e,this.remote=!t&&i?o.patch(e,i):t,this.diff=i||null,this.collapsible=!1}get unchanged(){return JSON.stringify(this.base)===JSON.stringify(this.remote)}get added(){return null===this.base}get deleted(){return null===this.remote}stringify(e){let t=function(e,i,r){if(!e)return e;if(Array.isArray(i)){const n=i.length>2?i.slice(1):i[1];return t(r?r(e,i[0]):e[i[0]],n,r)}return r?r(e,i):e[i]};const i=r.JSONExt.deepCopy(this.base);let n=e?t(i,e):i;const o=r.JSONExt.deepCopy(this.base);let a=e?t(o,e):o,f=this.diff&&e?t(this.diff,e,l.getSubDiffByKey):this.diff,u=null;return u=this.unchanged||this.added||this.deleted||!f?s.createDirectStringDiffModel(n,a):s.createPatchStringDiffModel(n,f),u.mimetype=e?this.innerMimeType(e):"application/json",u.collapsible=this.collapsible,u.collapsibleHeader=this.collapsibleHeader,u.startCollapsed=this.startCollapsed,u}get trusted(){return this._trusted}set trusted(e){this._trusted!==e&&(this._trusted=e,this.trustedChanged.emit(e))}get contents(){let e=[];return this.base&&e.push(this.base),this.remote&&this.remote!==this.base&&e.push(this.remote),e}}},8282:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMimetypeFromCellType=t.createDirectStringDiffModel=t.createPatchStringDiffModel=t.StringDiffModel=void 0;const r=i(616),n=i(1797),l=i(8799),o=i(8049),s=i(8787);class a{constructor(e,t,i,r,n,o,s){this.base=e,this.remote=t,null===e?(console.assert(0===r.length),this.deletions=[]):this.deletions=l.raw2Pos(r,e),null===t?(console.assert(0===i.length),this.additions=[]):this.additions=l.raw2Pos(i,t),this.collapsible=!0===n,this.collapsible&&(this.collapsibleHeader=o||"",this.startCollapsed=!0===s)}iterateDiffs(){return new a.DiffIter(this)}getLineChunks(){let e=new o.LineChunker,t=this.iterateDiffs();for(let i=t.next();void 0!==i;i=t.next())e.addDiff(i.range,i.isAddition);return e.chunks}get unchanged(){return this.base===this.remote}get added(){return null===this.base}get deleted(){return null===this.remote}}t.StringDiffModel=a,function(e){e.DiffIter=class{constructor(e){this.editOffset=0,this.done=!1,this.ia=0,this.id=0,this.hintTakeDeletion=!1,this.model=e}next(){let e=null,t=null,i=this.model.additions,r=this.model.deletions,n=this.hintTakeDeletion;if(this.hintTakeDeletion=!1,this.ia<this.model.additions.length)if(this.id<r.length){let t=i[this.ia],l=r[this.id];t.from.line===l.from.line-this.editOffset&&t.from.ch===l.from.ch?n?e=!1:(this.hintTakeDeletion=!0,e=!0):e=t.from.line<l.from.line-this.editOffset||t.from.line===l.from.line-this.editOffset&&t.from.ch<l.from.ch}else e=!0;else{if(!(this.id<r.length))return void(this.done=!0);e=!1}t=e?i[this.ia++]:r[this.id++];let l=t.to.line-t.from.line;return t.endsOnNewline&&(l+=1),this.editOffset+=e?-l:l,{range:t,isAddition:e}}};class t{constructor(e){this.currentOffset=0,this.models=[],this.iterators=[],this.values=[],this.offsets=[];for(let t of e){if(null===t)continue;this.models.push(t);let e=t.iterateDiffs();this.iterators.push(e),this.offsets.push(0),this.values.push(e.next())}}static cmp(e,t,i,r){if(void 0===e&&void 0===t)return 0;if(void 0===e)return 1;if(void 0===t)return-1;let n=e.range.from.line+(e.isAddition?i:0),l=t.range.from.line+(t.isAddition?r:0);return n<l||e.range.from.ch<t.range.from.ch?-1:n>l||e.range.from.ch>t.range.from.ch?1:0}next(){let e=0;for(let i=1;i<this.values.length;++i)0>t.cmp(this.values[i],this.values[e],this.iterators[i].editOffset,this.iterators[e].editOffset)&&(e=i);this.i=e;let i=this.values[e];return this.currentOffset=this.offsets[e],this.offsets[e]=this.iterators[e].editOffset,void 0!==i&&(this.values[e]=this.iterators[e].next()),i}currentModel(){return this.models[this.i]}}e.SyncedDiffIter=t}(a=t.StringDiffModel||(t.StringDiffModel={})),t.createPatchStringDiffModel=function(e,t){console.assert(!!t,"Patch model needs diff.");const i=n.JSONExt.deepCopy(e);let r=s.stringifyAndBlankNull(i),l=s.patchStringified(i,t);return new a(r,l.remote,l.additions,l.deletions)},t.createDirectStringDiffModel=function(e,t){let i=s.stringifyAndBlankNull(e),r=s.stringifyAndBlankNull(t),n=[],o=[];if(null===e&&null===t)throw new Error("Invalid arguments to createDirectStringDiffModel(). Both base and remote cannot be equal!");if(null===e)i=null,n.push(new l.DiffRangeRaw(0,r.length,void 0));else if(null===t)r=null,o.push(new l.DiffRangeRaw(0,i.length,void 0));else if(r!==i)throw new Error("Invalid arguments to createDirectStringDiffModel(). Either base or remote should be null, or they should be equal!");return new a(i,r,n,o)},t.setMimetypeFromCellType=function(e,t,i){"code"===t.cell_type?e.mimetype=i:"markdown"===t.cell_type?e.mimetype="text/markdown":r.isRaw(t)&&(e.mimetype=t.metadata.format||"text/plain")}},8799:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raw2Pos=t.DiffRangePos=t.DiffRangeRaw=void 0;const r=i(8681),n=i(8439);t.DiffRangeRaw=class{constructor(e,t,i){this.from=e,this.to=e+t,this.source=i}offset(e){this.from+=e,this.to+=e}};class l{constructor(e,t,i,r){this.from=e,this.to=t,this.chunkStartLine=!0===i,this.endsOnNewline=!0===r}}function o(e,t){if(0===e.length)return 0;let i=null;return e.some((function(e,r){return e>=t&&(i=r,!0)})),null===i?e.length:i}t.DiffRangePos=l,t.raw2Pos=function(e,t){let i=[],s=-1;for(;-1!==(s=t.indexOf("\n",s+1));)i.push(s);let a=[];for(let s of e){let e=o(i,s.from),f=e>0?i[e-1]+1:0,u=r.Pos(e,s.from-f);e=o(i,s.to-1),f=e>0?i[e-1]+1:0;let d=r.Pos(e,s.to-f),c=n.valueIn(s.from,i),h=n.valueIn(s.to-1,i),p=0===u.ch&&(u.line!==d.line||h||s.to===t.length)||!c||!n.valueIn(s.from-1,i)&&!n.valueIn(s.to,i),g=new l(u,d,p,h);g.source=s.source,a.push(g)}return a}},4526:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenStringDiff=t.stripSource=t.getDiffEntryByKey=t.getSubDiffByKey=t.JSON_INDENT=void 0;const r=i(8439),n=i(4632);function l(e,t,i){if(n.validateSequenceOp(e,t),"patch"===t.op){let i=e[t.key],r=t.diff;if(null!==r)for(let e of r)n.validateSequenceOp(i,e)}}t.JSON_INDENT="  ",t.getSubDiffByKey=function(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i].diff||null;return null},t.getDiffEntryByKey=function(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i];return null},t.stripSource=function e(t){if(!t)return null;let i=[];for(let n of t)if("patch"===n.op)i.push({key:n.key,op:n.op,diff:e(n.diff)});else{let e=r.shallowCopy(n);delete e.source,i.push(e)}return i},t.flattenStringDiff=function(e,t){"string"==typeof e&&(e=r.splitLines(e));let i=[0].concat(r.accumulateLengths(e)),o=[];for(let s of t){l(e,s);let t=i[s.key];if("patch"===s.op){let e=s.diff;if(null!==e)for(let i of e){let e=r.shallowCopy(i);e.key+=t,o.push(e)}}else{let e=null;if("addrange"===s.op)e=n.opAddRange(t,s.valuelist.join(""));else{let r=s.key+s.length;e=n.opRemoveRange(t,i[r]-t)}e.source=s.source,o.push(e)}}return r.sortByKey(o,"key")}},2191:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellDiffWidget=t.OUTPUTS_DIFF_CLASS=t.CELLDIFF_CLASS=void 0;const r=i(6510),n=i(8389),l=i(5168),o=i(3788),s=i(111),a=i(8439),f=i(3127),u=i(5494),d=i(4530);t.CELLDIFF_CLASS="jp-Cell-diff",t.OUTPUTS_DIFF_CLASS="jp-Diff-outputsContainer";const c="jp-Cellrow-outputs";class h extends r.Panel{constructor(e,i,r){super(),this.addClass(t.CELLDIFF_CLASS),this._model=e,this._rendermime=i,this.mimetype=r,this.init()}init(){let e=this.model,i=u.DIFF_CLASSES.slice();e.added?(this.addClass(u.ADDED_DIFF_CLASS),i=u.DIFF_CLASSES.slice(1,2)):e.deleted?(this.addClass(u.DELETED_DIFF_CLASS),i=u.DIFF_CLASSES.slice(0,1)):e.unchanged?this.addClass(u.UNCHANGED_DIFF_CLASS):this.addClass(u.TWOWAY_DIFF_CLASS);let n=h.createView(e.source,e,i,this._rendermime);if(n.addClass("jp-Cellrow-source"),e.executionCount&&n.insertWidget(0,h.createPrompts(e.executionCount,e)),this.addWidget(n),!e.metadata.unchanged){let t=h.createView(e.metadata,e,i,this._rendermime);t.addClass("jp-Cellrow-metadata"),this.addWidget(t)}const l=e.getChunkedOutputs();if(a.hasEntries(l)){let n=new r.Panel;n.addClass(t.OUTPUTS_DIFF_CLASS);let s=!1;for(let t of l)if(1===t.length){let r=t[0],l=h.createView(r,e,i,this._rendermime);n.addWidget(l),s=s||!r.unchanged||r.added||r.deleted}else{let l=new r.Panel;l.addClass(u.CHUNK_PANEL_CLASS);let o=new r.Panel;o.addClass(u.ADDED_CHUNK_PANEL_CLASS);let a=new r.Panel;a.addClass(u.REMOVED_CHUNK_PANEL_CLASS);for(let r of t){let t=r.deleted?a:o,n=h.createView(r,e,i,this._rendermime);t.addWidget(n),s=s||!r.unchanged||r.added||r.deleted}l.addWidget(o),l.addWidget(a),n.addWidget(l)}if(e.added||e.deleted)n.addClass(c),this.addWidget(n);else{let e=!s,t=s?"Outputs changed":"Outputs unchanged",i=new o.CollapsiblePanel(n,t,e);i.addClass(c),this.addWidget(i)}}}static createPrompts(e,t){let i=[];if(!t.added){let t=`In [${e.base||" "}]:`;i.push(t)}if(!t.unchanged&&!t.deleted){let t=`In [${e.remote||" "}]:`;i.push(t)}let n=new l.FlexPanel({direction:"left-to-right"});for(let e of i){let t=new r.Widget;t.node.innerText=e,t.addClass("jp-InputPrompt"),n.addWidget(t),l.FlexPanel.setGrow(t,1)}return n.addClass("jp-Cellrow-executionCount"),n}static createView(e,t,i,l){let a;if(e instanceof f.StringDiffModel){let i=null;if(e.unchanged&&"markdown"===t.cellType){let t=new n.MimeModel({data:{"text/markdown":e.base}}),r=l.preferredMimeType(t.data,"ensure");if(!r)throw new Error("No renderer for output");let o=l.createRenderer(r);o.renderModel(t),i=o}else i=s.createNbdimeMergeView(e);e.collapsible?a=new o.CollapsiblePanel(i,e.collapsibleHeader,e.startCollapsed):(a=new r.Panel,a.addWidget(i))}else{if(!(e instanceof f.OutputDiffModel))throw new Error("Unrecognized model type.");a=new d.OutputPanel(e,t,i,l),e.added?a.addClass(u.ADDED_DIFF_CLASS):e.deleted?a.addClass(u.DELETED_DIFF_CLASS):e.unchanged?a.addClass(u.UNCHANGED_DIFF_CLASS):a.addClass(u.TWOWAY_DIFF_CLASS)}return a}get model(){return this._model}}t.CellDiffWidget=h},5494:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_DEL_LABEL_CLASS=t.REMOVED_CHUNK_PANEL_CLASS=t.ADDED_CHUNK_PANEL_CLASS=t.CHUNK_PANEL_CLASS=t.DIFF_CLASSES=t.UNCHANGED_DIFF_CLASS=t.DELETED_DIFF_CLASS=t.ADDED_DIFF_CLASS=t.TWOWAY_DIFF_CLASS=void 0,t.TWOWAY_DIFF_CLASS="jp-Diff-twoway",t.ADDED_DIFF_CLASS="jp-Diff-added",t.DELETED_DIFF_CLASS="jp-Diff-deleted",t.UNCHANGED_DIFF_CLASS="jp-Diff-unchanged",t.DIFF_CLASSES=["jp-Diff-base","jp-Diff-remote"],t.CHUNK_PANEL_CLASS="jp-Diff-addremchunk",t.ADDED_CHUNK_PANEL_CLASS="jp-Diff-addedchunk",t.REMOVED_CHUNK_PANEL_CLASS="jp-Diff-removedchunk",t.ADD_DEL_LABEL_CLASS="jp-Diff-label"},7842:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(2191),t),n(i(3534),t),n(i(2569),t)},2569:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataDiffWidget=void 0;const r=i(6510),n=i(111),l=i(3788),o=i(5494);class s extends r.Panel{constructor(e){super(),this._model=e,console.assert(!e.added&&!e.deleted),this.addClass("jp-Metadata-diff"),this.init()}init(){let e=this._model;if(!e.unchanged){this.addClass(o.TWOWAY_DIFF_CLASS);let t=n.createNbdimeMergeView(e);e.collapsible&&(t=new l.CollapsiblePanel(t,e.collapsibleHeader,e.startCollapsed)),this.addWidget(t)}}}t.MetadataDiffWidget=s},3534:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDiffWidget=void 0;const r=i(6510),n=i(2191),l=i(5494),o=i(2569);class s extends r.Panel{constructor(e,t){super(),this._model=e,this._rendermime=t,this.addClass("jp-Notebook-diff")}init(){let e=this._model,t=this._rendermime,i=Promise.resolve();i=i.then((()=>{e.metadata&&this.addWidget(new o.MetadataDiffWidget(e.metadata))}));for(let o of e.chunkedCells)i=i.then((()=>new Promise((i=>{if(1!==o.length||o[0].added||o[0].deleted){let i=new r.Panel;i.addClass(l.CHUNK_PANEL_CLASS);let s=new r.Panel;s.addClass(l.ADDED_CHUNK_PANEL_CLASS);let a=new r.Panel;a.addClass(l.REMOVED_CHUNK_PANEL_CLASS);for(let i of o)(i.deleted?a:s).addWidget(new n.CellDiffWidget(i,t,e.mimetype));i.addWidget(s),i.addWidget(a),this.addWidget(i)}else this.addWidget(new n.CellDiffWidget(o[0],t,e.mimetype));requestAnimationFrame((()=>{i()}))}))));return i}get model(){return this._model}}t.NotebookDiffWidget=s},4530:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableOutputView=t.OutputPanel=void 0;const r=i(6510),n=i(9850),l=i(8389),o=i(3788),s=i(111),a=i(8439),f=i(5494),u=i(2621),d="jp-Diff-trustCandidate",c=["text/html"];let h=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;function p(e,t=64){return null!==e&&e.length>t&&h.test(e.replace("\n",""))}class g extends r.Panel{constructor(e,t,i,n){if(super(),this._mimetype=null,this.forceText=!1,this.model=e,this.rendermime=n,this.editorClasses=i,e.trustedChanged.connect(((e,t)=>{this.trustedChanged(t)})),g.isTrustSignificant(e,this.rendermime)&&this.addClass(d),e.added){if(!t.added){let e=new r.Widget;e.node.textContent="Output added",e.addClass(f.ADD_DEL_LABEL_CLASS),this.addWidget(e)}this.addClass(f.ADDED_DIFF_CLASS)}else if(e.deleted){if(!t.deleted){let e=new r.Widget;e.node.textContent="Output deleted",e.addClass(f.ADD_DEL_LABEL_CLASS),this.addWidget(e)}this.addClass(f.DELETED_DIFF_CLASS)}else e.unchanged?this.addClass(f.UNCHANGED_DIFF_CLASS):this.addClass(f.TWOWAY_DIFF_CLASS);let l=this.createView();this.initContainer(l),this.createHoverMenu(),this.addClass("jp-Diff-outputPanel")}initContainer(e){this.model.collapsible?this.container=new o.CollapsiblePanel(e,this.model.collapsibleHeader,this.model.startCollapsed):(this.container=this,this.container.addWidget(e)),this.view=e}replaceView(e){let t=this.view,i=this.container.widgets.indexOf(t);this.container.insertWidget(i,e),t.parent=null,this.view=e}createView(e=!1){let t=null,i=this.model,r=this.rendermime;return t=m.canRender(i,r)&&!e?new m(i,this.editorClasses,r,this.selectedMimetype):this.createOutputTextView(),t}createOutputTextView(){let e,t=this.model,i=null;if(null===this.selectedMimetype?n.find(this.rendermime.mimeTypes,(e=>(i=t.hasMimeType(e),null!==i))):i=t.hasMimeType(this.selectedMimetype),i){let r=t.stringify(i);p(r.base||r.remote)||(e=s.createNbdimeMergeView(r))}return e||(e=s.createNbdimeMergeView(t.stringify())),e}createHoverMenu(){this.menu=new r.Panel,this.menu.addClass("jp-Diff-outputMenu"),this.container.addWidget(this.menu);let e=document.createElement("button"),t=["Show source","Render"];e.innerText=t[0],e.onclick=i=>{this.forceText=!this.forceText,e.innerText=t[this.forceText?1:0],this.updateView()};let i=new r.Widget({node:e});i.addClass("jp-Diff-showOutputSourceButton"),this.menu.addWidget(i);let n=document.createElement("button");n.innerText="Trust",n.onclick=e=>{this.model.trusted=!this.model.trusted},i=new r.Widget({node:n}),i.addClass("jp-Diff-trustOutputButton"),this.menu.addWidget(i);let o=[];for(let e of this.model.contents){let t=l.OutputModel.getData(e);o=o.concat(Object.keys(t))}if(o=o.filter(a.unique),o.length>1){let e=a.buildSelect(o),t=this.selectedMimetype;t&&(e.selectedIndex=o.indexOf(t)),e.onchange=t=>{this.selectedMimetype=o[e.selectedIndex]},i=new r.Widget({node:e}),i.addClass("jp-Diff-outputMimetypeSelect"),this.menu.addWidget(i)}else if(1===o.length){let e=document.createElement("span");e.innerText=o[0],i=new r.Widget({node:e}),this.menu.addWidget(i)}}trustedChanged(e){this.updateView(),e?this.removeClass(d):g.isTrustSignificant(this.model,this.rendermime)&&this.addClass(d)}updateView(){let e=this.model;if(this.view instanceof m)if(!this.forceText&&m.canRender(e,this.rendermime))this.view.updateView(this.selectedMimetype,e.trusted);else{let e=this.createView(this.forceText);this.replaceView(e)}else{let e=this.createView(this.forceText);this.replaceView(e)}}get selectedMimetype(){if(null!==this._mimetype)return this._mimetype;let e=l.OutputModel.getData(this.model.base||this.model.remote),t=this.rendermime.preferredMimeType(e,this.model.trusted?"any":"ensure");return void 0===t?null:t}set selectedMimetype(e){this._mimetype!==e&&(this._mimetype=e,this.updateView())}static isTrustSignificant(e,t){if(e.trusted)return!1;let i=[];e.base&&i.push(e.base),e.remote&&e.remote!==e.base&&i.push(e.remote);for(let e of i){let i=new l.OutputModel({value:e,trusted:!1}),r=Object.keys(i.data),o=n.toArray(t.mimeTypes),s=a.intersection(r,o);for(let e of s){let i=t.getFactory(e);if(i&&(!i.safe||-1!==c.indexOf(e)))return!0}}return!1}}t.OutputPanel=g;class m extends u.RenderableDiffView{constructor(e,t,i,r){super(e,t,i,r)}createSubView(e,t){let i=new y(this.rendermime);return i.updateView(e,t,this.mimetype),i}updateView(e,t){let i=0,r=this.model;this.mimetype=e,n.each(this.layout.widgets,(n=>{if(n instanceof y){let l=null;0===i&&r.base?l=r.base:r.remote&&(l=r.remote),l&&n.updateView(l,t,e),++i}}))}static canRender(e,t){let i=e.contents;for(let r of i){let i=l.OutputModel.getData(r);if(!t.preferredMimeType(i,e.trusted?"any":"ensure"))return!1}return!0}}t.RenderableOutputView=m;class y extends r.Panel{constructor(e){super(),this.rendermime=e}updateView(e,t,i){let r=this.renderer;this.renderer=this.createRenderer(e,t,i),void 0!==r&&r.dispose(),this.addWidget(this.renderer)}createRenderer(e,t,i){let r=new l.OutputModel({value:e,trusted:t}),n=this.rendermime.createRenderer(i);return n.renderModel(r),n.addClass("jp-Diff-renderedOutput"),p(l.OutputModel.getData(e)[i])&&n.addClass("jp-diff-base64Output"),n}}},2621:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableDiffView=void 0;const r=i(6510);class n extends r.Widget{constructor(e,t,i,n){super(),this.rendermime=i,this.model=e,this.mimetype=n;let l=e.base,o=e.remote;this.layout=new r.PanelLayout;let s=0;if(l){let i=this.createSubView(l,e.trusted);this.layout.addWidget(i),i.addClass(t[s++])}if(o&&o!==l){let i=this.createSubView(o,e.trusted);this.layout.addWidget(i),i.addClass(t[s++])}}}t.RenderableDiffView=n},1604:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterDecisions=t.pushPatchDecision=t.buildDiffs=t.applyDecisions=t.resolveCommonPaths=t.pushPath=t.popPath=t.addSorted=t.decisionSortKey=t.decisionPathSortKey=t.MergeDecision=void 0;const r=i(4632),n=i(4526),l=i(8787),o=i(8439);function s(e,t){return void 0===e?t:e}class a{constructor(e,t=null,i=null,r="base",n=!1,l=null,f=null){this.level=0,e instanceof Array?this._path=e:e instanceof a?(this._path=e.absolutePath.slice(),t=e.localDiff,i=e.remoteDiff,r=e.action,n=e.conflict,l=e.customDiff,f=e.similarInsert,this.level=e.level):(this._path=s(e.common_path,[]),t=s(e.local_diff,t),i=s(e.remote_diff,i),r=function(e){if(o.valueIn(e,["base","local","remote","local_then_remote","remote_then_local","custom","clear","clear_parent","either"]))return e;throw new Error("Invalid merge decision action: "+e)}(s(e.action,r)),n=s(e.conflict,n),l=s(e.custom_diff,l),f=s(e.similar_insert,f)),this.localDiff=t,this.remoteDiff=i,this.action=r,this.conflict=n,this.customDiff=l,this.similarInsert=f}setValuesFrom(e){this._path=e.absolutePath.slice(),this.localDiff=e.localDiff,this.remoteDiff=e.remoteDiff,this.action=e.action,this.conflict=e.conflict,this.customDiff=e.customDiff,this.similarInsert=e.similarInsert,this.level=e.level}get localPath(){return this._path.slice(this.level)}get absolutePath(){return this._path}set absolutePath(e){this._path=e}pushPath(e){this._path.push(e)}get diffs(){let e=[this.localDiff,this.remoteDiff];return this.customDiff&&e.push(this.customDiff),e}set diffs(e){this.localDiff=e[0],this.remoteDiff=e[1],e.length>2&&(this.customDiff=e[2])}serialize(){return{common_path:this.absolutePath.slice(),local_diff:n.stripSource(this.localDiff),remote_diff:n.stripSource(this.remoteDiff),action:this.action,conflict:this.conflict,custom_diff:n.stripSource(this.customDiff)}}}function f(e,t){if(e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return 0}return t.length-e.length}function u(e,t){if(e.length<1)return null;let i=0;for(let t of e){if(null!==t&&t.length>0)break;i++}if(i===e.length)return console.log("Empty merge decision (no diffs)!"),null;let r=e[i],n=r[0].op,l=r[0].key;for(let t of e)if(t&&t.length>0)for(let e of t)if(e.op!==n||e.key!==l)return null;if("patch"===n){if(!0!==t)for(let t of e)if(t&&t.length>0&&(1!==t.length||!t[0].diff||1!==t[0].diff.length))return null;let i=[];for(let t of e)t&&t.length>0?i.push(t[0].diff):i.push(null);return{diffs:i,key:l}}return null}function d(e,t){for(let i of t.reverse())e=[r.opPatch(i,e)];return e}function c(e,t){for(let i of t)e=e[i];return e}function h(e,t){return e&&t?e.concat(t):e?e.slice():t?t.slice():[]}function p(e,t){let i=t.action;if("base"===i)return[];if("local"===i||"either"===i)return t.localDiff?t.localDiff.slice():[];if("remote"===i)return t.remoteDiff?t.remoteDiff.slice():[];if("custom"===i)return t.customDiff?t.customDiff.slice():[];if("local_then_remote"===i)return h(t.localDiff,t.remoteDiff);if("remote_then_local"===i)return h(t.remoteDiff,t.localDiff);if("clear"===i){let i=null;if("object"!=typeof e)throw new TypeError("Can only use `'clear'` action on objects/dicts");for(let e of h(t.localDiff,t.remoteDiff))if(i){if(i!==e.key)throw new Error("Cannot combine diffs with different keys")}else i=e.key;if(i){let l=r.opReplace(i,(n=e[i])instanceof Array?[]:"string"==typeof n?"":null===n||o.valueIn(typeof n,["number","boolean"])?null:{});return l.source={decision:t,action:"custom"},[l]}return[]}if("clear_parent"===i){if(Array.isArray(e)){let i=r.opRemoveRange(0,e.length);return i.source={decision:t,action:"custom"},[i]}if("string"==typeof e){let i=o.splitLines(e).length,n=r.opRemoveRange(0,i);return n.source={decision:t,action:"custom"},[n]}{let i=[];for(let n of e){let e=r.opRemove(n);e.source={decision:t,action:"custom"},i.push(e)}return i}}throw new Error('The action "'+i+'" is not defined');var n}function g(e,t){for(let i=0;i<t.length;++i){if("string"==typeof e)return[t.slice(0,i),t.slice(i)];e=e[t[i]]}return[t,null]}function m(e,t){let i=[],r=null;for(let n=0;n<t.length;++n){let l,s=e[t[n]].path,a=e[t[n]].diff;if(i=i.concat(a),l=n===t.length-1?r:e[t[n+1]].path,!o.isPrefixArray(l,s)){let r=m(e,t.slice(n+1));l=e[t[t.length-1]].path;let a=o.findSharedPrefix(s,l),f=a?a.length:0;i=d(i,s.slice(f)).concat(d(r,l.slice(f)));break}null!==l&&(i=d(i,s.slice(l.length)),r=l)}return i}t.MergeDecision=a,t.decisionPathSortKey=f,t.decisionSortKey=function(e,t){return f(e.absolutePath,t.absolutePath)},t.addSorted=function(e,t,i){let r=0;for(;r<e.length;++r){let n=f(e[r].absolutePath,t.absolutePath);if(n>0)return void e.splice(r,0,t);if(void 0!==i&&0===n){let n=null;for(let t of e[r].diffs)if(t)for(let e of t)(!n||e.key<n)&&(n=e.key);if(i===n)throw new Error("Shouldn't have multiple decisions with diff on same key");if(null===n||i<n)return void e.splice(r,0,t)}}e.push(t)},t.popPath=u,t.pushPath=d,t.resolveCommonPaths=function(e){for(let t of e){let e=t.diffs,i=t.absolutePath||[],r=u(e,!0);for(;r;)i.push(r.key),e=r.diffs,r=u(e,!0);t.absolutePath=i,t.diffs=e}},t.applyDecisions=function(e,t){let i=o.deepCopy(e),r=null,n=null,s=null,a=null,f=[],u=!1;for(let e of t){let t=g(i,e.localPath),c=t[0],h=t[1];if(o.arraysEqual(c,r))if(u);else{"clear_parent"===e.action&&(u=!0,f=[]);let t=p(a,e);h&&(t=d(t,h)),f=f.concat(t)}else{null!==r&&(null===n?i=l.patch(a,f):n[s]=l.patch(a,f)),r=c.slice(),a=i,n=null,s=null;for(let e of c)n=a,a=a[e],s=e;f=p(a,e),h&&(f=d(f,h)),u="clear_parent"===e.action}}return null!==r&&(null===n?i=l.patch(a,f):n[s]=l.patch(a,f)),i},t.buildDiffs=function(e,t,i){let r={},l=[],o="local"===i,s="merged"===i;o||s||console.assert("remote"===i);for(let i of t){let t=null,a=g(e,i.localPath),f=a[0],u=a[1];if(s)t=p(c(e,f),i);else if(t=o?i.localDiff:i.remoteDiff,null===t)continue;let h="/"+f.join("/");if(r.hasOwnProperty(h))if(u){let e=n.getSubDiffByKey(r[h].diff,u[0]);e?e.push.apply(e,t):(t=d(t,u),r[h].diff.push(t[0]))}else r[h].diff=r[h].diff.concat(t);else u&&(t=d(t,u)),r[h]={diff:t,path:f},l.push(h)}return 0===Object.keys(r).length?null:(r.hasOwnProperty("/")||(r["/"]={diff:[],path:[]},l.push("/")),m(r,l))},t.pushPatchDecision=function(e,t){let i=new a(e);for(let e of t.slice().reverse()){if(0===i.absolutePath.length)throw new Error("Cannot remove key from empty decision path: "+e+", "+i);let t=i.absolutePath.pop();if(t!==e)throw Error("Cannot push a patch that doesn't correspond to a key in the decision path! Key: "+e+"; Remaining path: "+i.absolutePath.concat([t]));let n=i.localDiff&&i.localDiff.length>0,l=i.remoteDiff&&i.remoteDiff.length>0,o=i.customDiff&&i.customDiff.length>0;i.localDiff=n?[r.opPatch(e,i.localDiff)]:null,i.remoteDiff=l?[r.opPatch(e,i.remoteDiff)]:null,i.customDiff=o?[r.opPatch(e,i.customDiff)]:null}return i},t.filterDecisions=function(e,t,i,r){let n=[];i=i||0;for(let l of e)void 0!==r&&l.absolutePath.length>r||o.isPrefixArray(t,l.absolutePath.slice(i))&&(l.level=i+t.length,n.push(l));return n}},8580:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellMergeModel=void 0;const r=i(616),n=i(6168),l=i(4526),o=i(3127),s=i(1604),a=i(8787),f=i(8439),u=i(8049),d=i(1833),c=i(1156);class h extends d.ObjectMergeModel{constructor(e,t,i){super(e,[],i,["source","metadata","outputs","execution_count"]),this.deleteCellChanged=new n.Signal(this),this._clearOutputs=!1,this.clearOutputsChanged=new n.Signal(this),this.onesided=!1,this._deleteCell=!1,this.processDecisions(t)}get deleteCell(){return this._deleteCell}set deleteCell(e){this._deleteCell!==e&&(this._deleteCell=e,this.deleteCellChanged.emit(e))}get clearOutputs(){return this._clearOutputs}set clearOutputs(e){this._clearOutputs!==e&&(this._clearOutputs=e,this.clearOutputsChanged.emit(e))}get agreedSource(){return!!this.local&&!!this.remote&&this.local.source.remote===this.remote.source.remote}get agreedMetadata(){return!(!this.local||!this.remote)&&this.local.metadata.remote===this.remote.metadata.remote}get agreedOutputs(){if(!this.local||!this.remote)return!1;let e=this.local.outputs,t=this.remote.outputs;if(!f.hasEntries(e)||!f.hasEntries(t))return!f.hasEntries(e)&&!f.hasEntries(t);if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(JSON.stringify(e[i].remote)!==JSON.stringify(t[i].remote))return!1;return!0}get agreedCell(){return this.agreedSource&&this.agreedMetadata&&this.agreedOutputs}get conflicted(){for(let e of this.decisions)if(e.conflict)return!0;return!1}hasConflictsOn(e){let t=s.filterDecisions(this.decisions,[e],2);for(let e of t)if(e.conflict)return!0;return!1}get sourceConflicted(){return this.hasConflictsOn("source")}get metadataConflicted(){return this.hasConflictsOn("metadata")}get outputsConflicted(){return this.hasConflictsOn("outputs")}clearOutputConflicts(){let e=s.filterDecisions(this.decisions,["outputs"],2);for(let t of e)t.conflict=!1}getExecutionCountDecision(){let e=s.filterDecisions(this.decisions,["cells"],0,2);for(let t of e)if(null!==l.getDiffEntryByKey(t.localDiff,"execution_count")||null!==l.getDiffEntryByKey(t.remoteDiff,"execution_count")||null!==l.getDiffEntryByKey(t.customDiff,"execution_count"))return t;return null}serialize(){if(this.deleteCell)return null;if(null===this.base){if(this.decisions.length>1||!this.merged.added)throw new c.NotifyUserError("Invalid cell decision");let e,t=this.decisions[0];if("local"===t.action||"either"===t.action){if(!t.localDiff)throw new c.NotifyUserError("Invalid cell decision");e=t.localDiff[0]}else if("remote"===t.action){if(!t.remoteDiff)throw new c.NotifyUserError("Invalid cell decision");e=t.remoteDiff[0]}else{if("custom"!==t.action)throw new c.NotifyUserError("Invalid cell decision");if(!t.customDiff)throw new c.NotifyUserError("Invalid cell decision");e=t.customDiff[0]}if("addrange"!==e.op)throw new c.NotifyUserError("Invalid cell decision");return e.valuelist[0]}let e=[];for(let t of this.decisions){let i=new s.MergeDecision(t);i.level=2,e.push(i)}let t=s.applyDecisions(this.base,e),i=t.source;return Array.isArray(i)&&(i=i.join("")),i!==this._merged.source.remote&&(console.warn("Serialized outputs doesn't match model value! Keeping the model value."),t.source=f.splitLines(this._merged.source.remote)),this.clearOutputs&&r.isCode(t)&&(t.outputs=[]),t}processDecisions(e){if(1===e.length&&f.arraysEqual(e[0].absolutePath,["cells"])){let t=e[0];0===(e=this.applyCellLevelDecision(t)).length&&this.decisions.push(t)}for(let t of e){if(t.level=2,t.absolutePath.length<2||"cells"!==t.absolutePath[0])throw new Error("Not a valid path for a cell decision");if(2===t.absolutePath.length&&(f.hasEntries(t.localDiff)||f.hasEntries(t.remoteDiff))){let e=s.pushPatchDecision(t,t.absolutePath.slice(1,2)),i=f.hasEntries(e.localDiff)?e.localDiff[0]:null,r=f.hasEntries(e.remoteDiff)?e.remoteDiff[0]:null,n=this.splitPatch(e,i,r);for(let e of n)e.level=2,this.decisions.push(e)}else this.decisions.push(t)}}applyCellLevelDecision(e){let t=[];if(console.assert(!this.onesided,"Cannot have multiple cell decisions on one cell!"),this.onesided=!0,f.hasEntries(e.localDiff))if(f.hasEntries(e.remoteDiff))if(console.assert(f.hasEntries(e.localDiff)&&f.hasEntries(e.remoteDiff)),console.assert(1===e.localDiff.length&&1===e.remoteDiff.length),e.localDiff[0].op===e.remoteDiff[0].op)if(null===this.base){let t=e.localDiff[0].valuelist[0];this._local=o.createAddedCellDiffModel(t,this.mimetype),this._remote=o.createAddedCellDiffModel(t,this.mimetype),this._merged=o.createAddedCellDiffModel(t,this.mimetype)}else this._local=o.createDeletedCellDiffModel(this.base,this.mimetype),this._remote=o.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=f.valueIn(e.action,["local","remote","either"]);else{let i=[e.localDiff[0].op,e.remoteDiff[0].op];if(console.assert(f.valueIn("removerange",i)&&f.valueIn("patch",i)),null===this.base)throw new Error("Invalid merge decision, cannot have null base for deleted cell: "+e);"removerange"===i[0]?(this._local=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell="local"===e.action,t=t.concat(this.splitPatch(e,null,e.remoteDiff[0]))):(this._remote=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell="remote"===e.action,t=t.concat(this.splitPatch(e,e.localDiff[0],null))),s.resolveCommonPaths(t)}else{if(this._remote=null,!e.localDiff||1!==e.localDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.localDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._local=o.createAddedCellDiffModel(i,this.mimetype),this._merged=o.createAddedCellDiffModel(i,this.mimetype)}else this._local=o.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=f.valueIn(e.action,["local","either"])}else{if(this._local=null,!e.remoteDiff||1!==e.remoteDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.remoteDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._remote=o.createAddedCellDiffModel(i,this.mimetype),this._merged=o.createAddedCellDiffModel(i,this.mimetype)}else this._remote=o.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=f.valueIn(e.action,["remote","either"])}return t}splitPatch(e,t,i){let r=!!t&&f.hasEntries(t.diff),n=!!i&&f.hasEntries(i.diff);if(!r&&!n)return[];let o=r?t.diff:null,a=n?i.diff:null,u=[],d=[];if(r)for(let e of o)d.push(e.key);if(n)for(let e of a)d.push(e.key);if(d=d.filter(f.unique),r&&n&&t.key!==i.key)throw new Error("Different keys of patch ops given to `splitPatch`.");let h=r?t.key:i.key;for(let t of d){if(this._whitelist&&!f.valueIn(t,this._whitelist))throw new c.NotifyUserError('Currently not able to handle decisions on variable "'+t+'"');let i=l.getDiffEntryByKey(o,t),r=l.getDiffEntryByKey(a,t),n=!(i&&r),d=e.action;"base"===d&&n&&(d=i?"local":"remote"),u.push(new s.MergeDecision(e.absolutePath.concat([h]),i?[i]:null,r?[r]:null,d,e.conflict))}let p=this.splitOnSourceChunks(u);return s.resolveCommonPaths(p),f.stableSort(p,s.decisionSortKey)}splitOnSourceChunks(e){let t=[];for(let i=0;i<e.length;++i){let r=e[i];if("source"===r.absolutePath[2]){let e=this.base.source;Array.isArray(e)||(e=f.splitLines(e)),r.level=3;let i=u.splitMergeDecisionsOnChunks(e,[r]);s.resolveCommonPaths(i),t=t.concat(f.stableSort(i,s.decisionSortKey))}else t.push(r)}return t}createDiffModel(e){if(null===this.base)throw new Error("Cannot create a patched or unchanged diff model with null base!");return e&&e.length>0?o.createPatchedCellDiffModel(this.base,e,this.mimetype):o.createUnchangedCellDiffModel(this.base,this.mimetype)}createMergedDiffModel(){if(null===this.base)throw new Error("Cannot create a patched or unchanged merged diff model with null base!");return function(e,t,i,n,u){for(let e of t)if(0===e.localPath.length){let t=s.popPath(e.diffs,!0);null!==t&&(e.diffs=t.diffs,e.pushPath(t.key))}let c=new d.DecisionStringDiffModel(e.source,s.filterDecisions(t,["source"],2),[i?i.source:null,n?n.source:null]);o.setMimetypeFromCellType(c,e,u);let h=new d.DecisionStringDiffModel(e.metadata,s.filterDecisions(t,["metadata"],2),[i?i.metadata:null,n?n.metadata:null]),p=null,g=null;if(r.isCode(e)){if(e.outputs){let i,r=e.outputs,n=s.filterDecisions(t,["outputs"],2),l=s.buildDiffs(r,n,"merged");i=l&&l.length>0?a.patch(r,l):r,p=o.makeOutputModels(r,i,l)}let i=e.execution_count,r=s.filterDecisions(t,["cells"],0,2);for(let t of r)if(null!==l.getDiffEntryByKey(t.localDiff,"execution_count")||null!==l.getDiffEntryByKey(t.remoteDiff,"execution_count")||null!==l.getDiffEntryByKey(t.customDiff,"execution_count")){t.level=2;let r=s.buildDiffs(e,[t],"merged"),n=f.hasEntries(r)?r[0]:null;g=o.createImmutableModel(i,i,n)}}return new o.CellDiffModel(c,h,p,g,e.cell_type)}(this.base,this.decisions,this.local,this.remote,this.mimetype)}}t.CellMergeModel=h},1833:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectMergeModel=t.DecisionStringDiffModel=void 0;const r=i(8799),n=i(3127),l=i(1604),o=i(8049),s=i(8787);class a extends n.StringDiffModel{constructor(e,t,i,r,n,l){super(s.stringifyAndBlankNull(e),"",[],[],r,n,l),this.rawBase=e,this.decisions=t,this._outdated=!0,this._sourceModels=i,this._update()}get additions(){return this._outdated&&this._update(),this._additions}set additions(e){this._additions=e}get deletions(){return this._outdated&&this._update(),this._deletions}set deletions(e){this._deletions=e}get remote(){return this._outdated&&this._update(),this._remote}set remote(e){this._remote=e}invalidate(){this._outdated=!0}get invalid(){return this._outdated}getLineChunks(){let e=[this];e=e.concat(this._sourceModels);let t=new o.LineChunker,i=new n.StringDiffModel.SyncedDiffIter(e);for(let e=i.next();void 0!==e;e=i.next())if(i.currentModel()===this)t.addDiff(e.range,e.isAddition);else{if(!e.range.source||"base"!==e.range.source.decision.action)continue;t.addGhost(e.range,e.isAddition,i.currentOffset)}return t.chunks}_update(){this._outdated=!1;let e=l.buildDiffs(this.rawBase,this.decisions,"merged"),t=s.patchStringified(this.rawBase,e);this._additions=r.raw2Pos(t.additions,t.remote),this._deletions=r.raw2Pos(t.deletions,this.base||""),this._remote=t.remote}}t.DecisionStringDiffModel=a,t.ObjectMergeModel=class{constructor(e,t,i,r){this._finalized=!1,this.base=e,this.mimetype=i,this._whitelist=r||null,this.decisions=t}serialize(){return null===this.base?null:l.applyDecisions(this.base,this.decisions)}get local(){if(void 0===this._local){this._finalizeDecisions();let e=l.buildDiffs(this.base,this.decisions,"local");this._local=this.createDiffModel(e)}return this._local}get remote(){if(void 0===this._remote){this._finalizeDecisions();let e=l.buildDiffs(this.base,this.decisions,"remote");this._remote=this.createDiffModel(e)}return this._remote}get merged(){return void 0===this._merged&&(this._finalizeDecisions(),this._merged=this.createMergedDiffModel()),this._merged}get subModels(){return[this.local,this.remote,this.merged]}_finalizeDecisions(){if(!this._finalized){for(let e of this.decisions)"either"===e.action?(o.labelSource(e.localDiff,{decision:e,action:"either"}),o.labelSource(e.remoteDiff,{decision:e,action:"either"})):(o.labelSource(e.localDiff,{decision:e,action:"local"}),o.labelSource(e.remoteDiff,{decision:e,action:"remote"})),o.labelSource(e.customDiff,{decision:e,action:"custom"});this._finalized=!0}}}},5118:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(8580),t),n(i(1833),t),n(i(617),t),n(i(1522),t)},617:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataMergeModel=void 0;const r=i(3127),n=i(1833),l=i(1797);class o extends n.ObjectMergeModel{constructor(e,t){super(e,t,"application/json")}serialize(){if(!this.merged||null===this.merged.remote)throw new Error("Missing notebook metadata merge data.");return JSON.parse(this.merged.remote)}createDiffModel(e){if(e&&e.length>0)return r.createPatchStringDiffModel(this.base,e);{const e=l.JSONExt.deepCopy(this.base);return r.createDirectStringDiffModel(e,e)}}createMergedDiffModel(){return new n.DecisionStringDiffModel(this.base,this.decisions,[this.local,this.remote])}}t.MetadataMergeModel=o},1522:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookMergeModel=void 0;const r=i(8439),n=i(1604),l=i(8049),o=i(8787),s=i(8580),a=i(617);function f(e){return!!e&&2===e.length&&e[0].key===e[1].key}t.NotebookMergeModel=class{constructor(e,t){this.base=e;let i,r=this.constructor.preprocessDecisions(t);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=this.buildCellList(r);let l=n.filterDecisions(r,["metadata"]);this.metadata=new a.MetadataMergeModel(e.metadata,l),this.unsavedChanges=!1}static preprocessDecisions(e){let t=[];for(let i of e)t.push(new n.MergeDecision(i));t=function(e){let t=[];for(let i of e)if(r.arraysEqual(i.absolutePath,["cells"]))if(i.localDiff&&!i.remoteDiff)for(let e of i.localDiff){let r=new n.MergeDecision(i);r.localDiff=[e],t.push(r)}else if(i.remoteDiff&&!i.localDiff)for(let e of i.remoteDiff){let r=new n.MergeDecision(i);r.absolutePath=i.absolutePath.slice(),r.remoteDiff=[e],t.push(r)}else if(f(i.localDiff))if(f(i.remoteDiff)){let e=new n.MergeDecision(i);e.localDiff=i.localDiff.slice(0,1),e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new n.MergeDecision(i.absolutePath.slice(),i.localDiff.slice(1),i.remoteDiff.slice(1),"either"))}else{let e=new n.MergeDecision(i);e.localDiff=i.localDiff.slice(0,1),t.push(e),t.push(new n.MergeDecision(i.absolutePath.slice(),i.localDiff.slice(1),[],"local",i.conflict))}else if(f(i.remoteDiff)){let e=new n.MergeDecision(i);e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new n.MergeDecision(i.absolutePath.slice(),[],i.remoteDiff.slice(1),"remote",i.conflict))}else if(r.hasEntries(i.remoteDiff)&&r.hasEntries(i.localDiff))if("addrange,removerange"===[i.remoteDiff[0].op,i.localDiff[0].op].sort().join(",")){let e=new n.MergeDecision(i);e.action="local",e.localDiff=i.localDiff.slice(),e.remoteDiff=null,t.push(e);let r=new n.MergeDecision(i);r.action="remote",r.localDiff=null,r.remoteDiff=i.remoteDiff.slice(),t.push(r)}else t.push(i);else t.push(i);else t.push(i);return n.resolveCommonPaths(t),t}(t),t=function(e){let t=[],i=function(e,t,i,r){let l=new n.MergeDecision(e.absolutePath.slice(),null,null,e.action,e.conflict),o=[{key:t,op:"removerange",length:1}];return console.assert(i||r),i&&(l.localDiff=o),r&&(l.remoteDiff=o),l};for(let n of e){if(!r.arraysEqual(n.absolutePath,["cells"])){t.push(n);continue}let e=r.hasEntries(n.localDiff)?n.localDiff[n.localDiff.length-1]:null,l=r.hasEntries(n.remoteDiff)?n.remoteDiff[n.remoteDiff.length-1]:null;if(e&&!l||l&&!e){let r=e||l;if(!("removerange"===r.op&&r.length>1)){t.push(n);continue}for(let o=0;o<r.length;++o)t.push(i(n,r.key+o,!!e,!!l))}else if(l&&e){if("removerange"!==e.op&&"removerange"!==l.op){t.push(n);continue}if(e.op===l.op){let r=e.key,o=l.key,s=Math.min(r,o),a=r+e.length,f=o+l.length,u=Math.max(a,f);for(let e=s;e<u;++e){let l=e>=r&&e<a,s=e>=o&&e<f;t.push(i(n,e,l,s))}}else{let r="removerange"===e.op,o=r?e:l,s=r?l:e;console.assert("patch"===s.op);let a=s.key,f=o.key;for(let e=f;e<f+o.length;++e){let l=i(n,e,r,!r);e===a&&(r?l.remoteDiff=[s]:l.localDiff=[s]),t.push(l)}}}}return t}(t),t=function(e){let t=[],i=function(e,t,i,l){let o=new n.MergeDecision(e.absolutePath.slice(),null,null,e.action,e.conflict);if(i&&!r.hasEntries(e.localDiff)||!i&&!r.hasEntries(e.remoteDiff))throw new Error("Invalid input: "+e);let s=[{key:(i?e.localDiff:e.remoteDiff)[0].key,op:"addrange",valuelist:[t]}];return console.assert(i||l),i&&(o.localDiff=s),l&&(o.remoteDiff=s),o};for(let n of e){if(!r.arraysEqual(n.absolutePath,["cells"])){t.push(n);continue}let e=!0;if(n.localDiff)for(let t of n.localDiff)if("addrange"!==t.op){e=!1;break}if(n.remoteDiff)for(let t of n.remoteDiff)if("addrange"!==t.op){e=!1;break}if(!e){t.push(n);continue}let l=n.localDiff&&1===n.localDiff.length?n.localDiff[0]:null,s=n.remoteDiff&&1===n.remoteDiff.length?n.remoteDiff[0]:null;if(l&&!s||s&&!l){let e=(l||s).valuelist;for(let r of e)t.push(i(n,r,!!l,!!s))}else if(l&&s)if(o.stringify(l.valuelist)===o.stringify(s.valuelist))for(let e of l.valuelist)t.push(i(n,e,!0,!0));else{let e=l.key;if(console.assert(e===s.key),"remote_then_local"===n.action){for(let e of s.valuelist){const r=i(n,e,!1,!0);r.action="remote",t.push(r)}for(let e of l.valuelist){const r=i(n,e,!0,!1);r.action="local",t.push(r)}}else{for(let e of l.valuelist){const r=i(n,e,!0,!1);r.action="local",t.push(r)}for(let e of s.valuelist){const r=i(n,e,!1,!0);r.action="remote",t.push(r)}}}}return t}(t),t=function(e){let t=[];for(let i of e){if(!r.arraysEqual(i.absolutePath,["cells"])){t.push(i);continue}let e=r.hasEntries(i.localDiff)?i.localDiff:null,l=r.hasEntries(i.remoteDiff)?i.remoteDiff:null;if(e&&e.length<2&&l&&l.length<2){t.push(i);continue}let o=Math.max(e?e.length:0,l?l.length:0);for(let r=0;r<o;++r){let o=e&&r<e.length?[e[r]]:null,s=l&&r<l.length?[l[r]]:null;t.push(new n.MergeDecision(i.absolutePath.slice(),o,s,i.action,i.conflict))}}return r.stableSort(t,n.decisionSortKey)}(t),n.resolveCommonPaths(t);for(let e of t)"either"===e.action?(l.labelSource(e.localDiff,{decision:e,action:"either"}),l.labelSource(e.remoteDiff,{decision:e,action:"either"})):(l.labelSource(e.localDiff,{decision:e,action:"local"}),l.labelSource(e.remoteDiff,{decision:e,action:"remote"})),l.labelSource(e.customDiff,{decision:e,action:"custom"});return t}serialize(){let e={};for(let t in this.base)r.valueIn(t,["cells","metadata"])||(e[t]=this.base[t]);e.metadata=this.metadata.serialize();let t=[];for(let e of this.cells){let i=e.serialize();null!==i&&t.push(i)}return e.cells=t,e}get decisions(){let e=[];for(let t of this.cells)e=e.concat(t.decisions);return e=e.concat(this.metadata.decisions),e}get conflicts(){let e=[];for(let t of this.decisions)t.conflict&&e.push(t);return e}buildCellList(e){let t=[];for(let e of this.base.cells)t.push({base:e,decisions:[]});let i=0;for(let n of e){let e=n.absolutePath;if(!(e.length<1||"cells"!==e[0]))if(r.arraysEqual(e,["cells"])){let e=null,r=!1;for(let l of n.diffs)if(l&&0!==l.length&&(e=l[0].key,"addrange"===l[0].op)){let l=i+e;t.splice(l,0,{base:null,decisions:[n]}),i+=1,r=!0;break}if(r)continue;if(null===e)throw new Error("No index could be found for merge decision!");t[e+i].decisions.push(n)}else t[e[1]].decisions.push(n)}let n=[];for(let e of t)n.push(new s.CellMergeModel(e.base,e.decisions,this.mimetype));return n}}},9858:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PatchObjectHelper=void 0;const r=i(8439);class n{constructor(e,t){this._diffLUT={};let i=[];if(t)for(let e of t)i.push(e.key),this._diffLUT[e.key]=e;this._diffKeys=i,this.baseKeys=l(e)}isDiffKey(e){return r.valueIn(e,this._diffKeys)}getDiffEntry(e){return this._diffLUT[e]}entriesAfterCurrentAddRem(){if(void 0===this._currentIsAddition)throw new Error("Current op is not an add or remove op");let e=this._currentIsAddition?"remove":"add";for(let t of this._remainingKeys){if(!r.valueIn(t,this._diffKeys))return!0;if(this._diffLUT[t].op!==e)return!0}return!1}iter(){return this._remainingKeys=this.baseKeys.concat(this._diffKeys).filter(r.unique).sort(),this}keys(){return this}next(){let e=this._remainingKeys.shift();if(e&&r.valueIn(e,this._diffKeys)){let t=this._diffLUT[e].op;this._currentIsAddition="add"===t||"remove"!==t&&void 0}return e}clone(){let e=new n({},null);return e.baseKeys=this.baseKeys,e._diffKeys=this._diffKeys,e._currentIsAddition=this._currentIsAddition,e._diffLUT=this._diffLUT,e._remainingKeys=this._remainingKeys.slice(),e}}t.PatchObjectHelper=n;let l=Object.keys||function(e){let t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(let r in e)t.call(e,r)&&i.push(r);return i}},2868:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patch=void 0;const r=i(1797),n=i(8439),l=i(4632),o=i(4425);t.patch=function e(t,i){if("string"==typeof t)return o.patchString(t,i,0,!1).remote;if(Array.isArray(t))return function(t,i){if(null===i)return n.deepCopy(t);let r=[],o=0,s=0;for(let a of i){l.validateSequenceOp(t,a);let i=a.key;for(let e of t.slice(o,i))r.push(n.deepCopy(e));"addrange"===a.op?(r=r.concat(a.valuelist),s=0):"removerange"===a.op?s=a.length:"patch"===a.op&&(r.push(e(t[i],a.diff)),s=1),o=Math.max(o,i+s)}for(let e of t.slice(o))r.push(n.deepCopy(e));return r}(r.JSONExt.deepCopy(t),i);if("number"==typeof t||"boolean"==typeof t)throw new TypeError("Cannot patch an atomic type: "+typeof t);if(null===t)throw new TypeError("Cannot patch a null base!");return function(t,i){let r={},o=Object.keys(t);if(i)for(let n of i){l.validateObjectOp(t,n,o);let i=n.key;"add"===n.op?r[i]=n.value:"remove"===n.op?o.splice(o.indexOf(i),1):"replace"===n.op?(o.splice(o.indexOf(i),1),r[i]=n.value):"patch"===n.op&&(o.splice(o.indexOf(i),1),r[i]=e(t[i],n.diff))}for(let e of o)r[e]=n.deepCopy(t[e]);return r}(r.JSONExt.deepCopy(t),i)}},8787:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(9858),t),n(i(2868),t),n(i(4425),t)},4425:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchString=t.patchStringified=t.stringifyAndBlankNull=t.stringify=void 0;const r=i(9850),n=i(8439),l=i(4526),o=i(4632),s=i(8799),a=i(9858),f=i(7266);function u(e,t,i=!0){let r=f(e,{space:l.JSON_INDENT});return t&&(r=function(e,t,i){i=!1!==i;let r=e.split("\n"),o=new Array(r.length);i||(o[0]=r[0]);for(let e=i?0:1;e<r.length;e++)o[e]=n.repeatString(l.JSON_INDENT,t)+r[e];return o.join("\n")}(r,t,i)),r}function d(e,t,i,r){let n=[],o=[],a=0;if(null===t)return{remote:r?u(e,i):e,additions:n,deletions:o};t=l.flattenStringDiff(e,t);let f=0,d=0,p="";for(let i of t){let t=i.key,r=e.slice(f,t);if(p+=r,a+=r.length,"addrange"===i.op){let e=i.valuelist;n.push(new s.DiffRangeRaw(p.length,e.length,i.source)),p+=e,d=0}else"removerange"===i.op&&(d=i.length,o.push(new s.DiffRangeRaw(a,d,i.source)),a+=d);f=Math.max(f,t+d)}return p+=e.slice(f,e.length),r&&(p=u(p,i),c(i*l.JSON_INDENT.length+1,n,o),h(p,n),h(u(e,i),o)),{remote:p,additions:n,deletions:o}}function c(e,t,i){for(let i of t)i.offset(e);for(let t of i)t.offset(e)}function h(e,t){let i,r=['\\"',"\\\\","\\/","\\b","\\f","\\n","\\r","\\t"],n=/\\uD[89A-Fa-f][0-9a-fA-F]{2}\\uD[c-fC-F][0-9a-fA-F]{2}/g,l=/(?!\\uD[c-fC-F][0-9a-fA-F]{2})\\u(?!D[89A-Fa-f][0-9a-fA-F]{2})\d{4}/g,o=[],s=[];for(let t of r){let i=JSON.parse('"'+t+'"').length,r=0;for(;r=e.indexOf(t,r),!(r<0);)o.push(r),s.push(2-i),r++}for(;null!==(i=l.exec(e));)o.push(i.index),s.push(6-JSON.parse('"'+i[0]+'"').length);for(;null!==(i=n.exec(e));)o.push(i.index),s.push(12-JSON.parse('"'+i[0]+'"').length);for(let e=0;e<o.length;e++)for(let i of t){let t=o[e],r=s[e];i.from>t&&(i.from+=r),i.to>t&&(i.to+=r)}}t.stringify=u,t.stringifyAndBlankNull=function(e){return"string"==typeof e?e:null===e?"":u(e)},t.patchStringified=function e(t,i,f){if(void 0===f&&(f=0),"string"==typeof t)return d(t,i,f,f>0);if(Array.isArray(t))return function(t,i,r){let a="",f=[],d=[],h=0,p=",\n";if(null===i)return{remote:u(t,r),additions:f,deletions:d};let g=0,m=0;for(let n of i){o.validateSequenceOp(t,n);let i=n.key;for(;i>g;g++){let e=u(t[g],r+1)+p;a+=e,h+=e.length}if("addrange"===n.op){let e="";for(let t of n.valuelist)e+=u(t,r+1)+p;let l=e.length;i===t.length&&(l-=1),f.push(new s.DiffRangeRaw(a.length,l,n.source)),a+=e,m=0}else if("removerange"===n.op){let e="",l=n.length;for(let n=i;n<i+l;n++)e+=u(t[n],r+1)+p;let o=e.length;l+i===t.length&&(o-=1),d.push(new s.DiffRangeRaw(h,o,n.source)),h+=e.length,m=n.length}else if("patch"===n.op){let l=e(t[i],n.diff,r+1);m=1;let o=l.remote+p;c(a.length,l.additions,l.deletions),f=f.concat(l.additions),d=d.concat(l.deletions),h+=u(t[i],r+1).length,a+=o}g=Math.max(g,i+m)}for(;t.length>g;g++)a+=u(t[g],r+1)+p;a.slice(a.length-p.length)===p&&(a=a.slice(0,a.length-p.length));let y=n.repeatString(l.JSON_INDENT,r);return a=y+"[\n"+a+"\n"+y+"]",c(y.length+2,f,d),{remote:a,additions:f,deletions:d}}(t,i,f);if("number"==typeof t||"boolean"==typeof t)throw new TypeError("Cannot patch an atomic type: "+typeof t);if(null===t)throw new TypeError("Cannot patch a null base!");return function(t,i,f){let d="",h=[],p=[],g=",\n",m=0;if(null===i)return{remote:u(t,f),additions:h,deletions:p};let y=new a.PatchObjectHelper(t,i),D=y.baseKeys.slice();r.each(y.keys(),(i=>{let r=function(e,t){return n.repeatString(l.JSON_INDENT,t)+'"'+e+'": '}(i,f+1);if(y.isDiffKey(i)){let a=y.getDiffEntry(i);if(o.validateObjectOp(t,a,D),n.valueIn(a.op,["add","replace","remove"])){let e="replace"===a.op;if("add"===a.op||"replace"===a.op){let t=u(a.value,f+1,!1)+g,i=d.length,n=t.length;e?i+=r.length:n+=r.length,!e&&y.entriesAfterCurrentAddRem()||(n-=g.length,"add"===a.op&&(n+=1)),h.push(new s.DiffRangeRaw(i,n,a.source)),d+=r+t}if("remove"===a.op||"replace"===a.op){let n=u(t[i],f+1,!1)+g,l=m,o=n.length;e?l+=r.length:o+=r.length,!e&&y.entriesAfterCurrentAddRem()||(o-=g.length,"remove"===a.op&&(o+=1)),p.push(new s.DiffRangeRaw(l,o,a.source)),m+=r.length+n.length,D.splice(D.indexOf(i),1)}}else if("patch"===a.op){let n=e(t[i],a.diff,f+1),o=n.remote;o=r+o.slice((f+1)*l.JSON_INDENT.length)+g,c(d.length+r.length-(f+1)*l.JSON_INDENT.length,n.additions,n.deletions),d+=o,h=h.concat(n.additions),p=p.concat(n.deletions),m+=u(t[i],f+1,!1).length+r.length+g.length,D.splice(D.indexOf(i),1)}}else{let e=r+u(t[i],f+1,!1)+g;d+=e,m+=e.length}})),d.slice(d.length-g.length)===g&&(d=d.slice(0,d.length-g.length));let b=n.repeatString(l.JSON_INDENT,f);return d=b+"{\n"+d+"\n"+b+"}",c(b.length+2,h,p),{remote:d,additions:h,deletions:p}}(t,i,f)},t.patchString=d},5206:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexLayout=void 0;const r=i(9850),n=i(3211),l=i(6510);class o extends l.PanelLayout{constructor(e={}){super(),this.order=null,this._wrap=!1,this._minimumSpacing=4,this._justifyContent=null,this._alignItems=null,this._alignContent=null,this._dirty=!1,this._direction="top-to-bottom",this._stretchType=null,this._evenSizes=!1,void 0!==e.direction&&(this._direction=e.direction),void 0!==e.minimumSpacing&&(this._minimumSpacing=s.clampSpacing(e.minimumSpacing)),void 0!==e.wrap&&(this._wrap=e.wrap),void 0!==e.justifyContent&&(this._justifyContent=e.justifyContent),void 0!==e.alignItems&&(this._alignItems=e.alignItems),void 0!==e.alignContent&&(this._alignContent=e.alignContent),void 0!==e.stretchType&&(this._stretchType=e.stretchType),void 0!==e.evenSizes&&(this._evenSizes=e.evenSizes)}get direction(){return this._direction}set direction(e){this._direction!==e&&(this._direction=e,this.parent&&(s.toggleDirection(this.parent,e),this.parent.fit()))}get minimumSpacing(){return this._minimumSpacing}set minimumSpacing(e){e=s.clampSpacing(e),this._minimumSpacing!==e&&(this._minimumSpacing=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get justifyContent(){return this._justifyContent}set justifyContent(e){if(this._justifyContent===e)return;this._justifyContent=e;let t=s.translateFlexString(e);this.parent&&(this.parent.node.style.justifyContent=t,this.parent.fit())}get alignItems(){return this._alignItems}set alignItems(e){if(this._alignItems===e)return;this._alignItems=e;let t=s.translateFlexString(e);this.parent&&(this.parent.node.style.alignItems=t,this.parent.fit())}get alignContent(){return this._alignContent}set alignContent(e){if(this._alignContent===e)return;this._alignContent=e;let t=s.translateFlexString(e);this.parent&&(this.parent.node.style.alignContent=t,!1!==this._wrap&&this.parent.fit())}get stretchType(){return this._stretchType}set stretchType(e){this._stretchType!==e&&(this._stretchType=e,this.parent&&this.parent.fit())}get evenSizes(){return this._evenSizes}set evenSizes(e){this._evenSizes!==e&&(this._evenSizes=e,this.parent&&this.parent.fit())}isHorizontal(){return"right-to-left"===this.direction||"left-to-right"===this.direction}isVertical(){return!this.isHorizontal()}init(){s.toggleDirection(this.parent,this.direction),super.init()}attachWidget(e,t){super.attachWidget(e,t),this.order&&r.ArrayExt.insert(this.order,e,t),this.parent.fit()}moveWidget(e,t,i){e!==t&&(this.order||(this.order=this.widgets.slice()),r.ArrayExt.move(this.order,e,t),this._dirty=!0),this.parent.update()}detachWidget(e,t){if(this.order){let e=0;for(;e<this.order.length;++e)if(t===this.order[e]){r.ArrayExt.removeAt(this.order,e);break}}super.detachWidget(e,t),this.parent.fit()}onAfterShow(e){super.onAfterShow(e),this.parent.update()}onAfterAttach(e){super.onAfterAttach(e),s.toggleDirection(this.parent,this._direction);let t=this.parent.node.style;t.flexWrap=this._wrap?"wrap":"nowrap",t.justifyContent=s.translateFlexString(this._justifyContent)||"",t.alignContent=s.translateFlexString(this._alignContent)||"",t.alignItems=s.translateFlexString(this._alignItems)||"",this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update()}onUpdateRequest(e){this.parent.isVisible&&this._update()}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){this._dirty=!0;let e=this.parent.parent;e&&n.MessageLoop.sendMessage(e,l.Widget.Msg.FitRequest),this._dirty&&n.MessageLoop.sendMessage(this.parent,l.Widget.Msg.UpdateRequest)}_update(){this._dirty=!1;let e=this.order||this.widgets;if(0===e.length)return;let t=this.minimumSpacing.toString()+"px";if(this.isHorizontal())for(let i=0;i<e.length-1;++i)e[i].node.style.marginRight=t;else for(let i=0;i<e.length-1;++i)e[i].node.style.marginBottom=t;if(this._evenSizes||this.stretchType){let t=null,i=null,r=null;if(this._evenSizes)t=0,i=1;else switch(this._stretchType){case"grow":i=1,r=0;break;case"shrink":i=0,r=1;break;case"both":i=1,r=1;break;case"fixed":i=0,r=0;break;default:throw new TypeError("Invalid stretch type: "+this._stretchType)}for(let n=0;n<e.length;++n){let l=e[n].node.style;null!==t&&(l.flexBasis=t.toString()),null!==i&&(l.flexGrow=i.toString()),null!==r&&(l.flexShrink=r.toString())}}for(let t=0;t<e.length;++t)e[t].node.style.order=this.order?t.toString():""}}var s;t.FlexLayout=o,function(e){e.getGrow=function(e){let t=e.node.style.flexGrow;return t?parseInt(t,10):null},e.setGrow=function(e,t,i=!0){e.node.style.flexGrow=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getShrink=function(e){let t=e.node.style.flexShrink;return t?parseInt(t,10):null},e.setShrink=function(e,t,i=!0){e.node.style.flexShrink=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getSizeBasis=function(e){let t=e.node.style.flexBasis;return"auto"===t?"auto":t?parseInt(t.replace("px",""),10):null},e.setSizeBasis=function(e,t,i=!0){e.node.style.flexBasis="auto"===t?t:null===t?"":t.toString()+"px",i&&e.parent&&e.parent.fit()}}(o=t.FlexLayout||(t.FlexLayout={})),function(e){e.isHorizontal=function(e){return"left-to-right"===e||"right-to-left"===e},e.translateFlexString=function(e){return"start"!==e&&"end"!==e||(e="flex-"+e),e},e.toggleDirection=function(e,t){e.toggleClass("p-mod-left-to-right","left-to-right"===t),e.toggleClass("p-mod-right-to-left","right-to-left"===t),e.toggleClass("p-mod-top-to-bottom","top-to-bottom"===t),e.toggleClass("p-mod-bottom-to-top","bottom-to-top"===t)},e.clampSpacing=function(e){return Math.max(0,Math.floor(e))}}(s||(s={}))},5168:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexPanel=void 0;const r=i(5206),n=i(6510),l="p-FlexPanel-child";class o extends n.Panel{constructor(e={}){super({layout:s.createLayout(e)}),e.layout||(void 0!==e.minimumSpacing&&(this.minimumSpacing=e.minimumSpacing),void 0!==e.direction&&(this.direction=e.direction)),this.addClass("p-FlexPanel")}get direction(){return this.layout.direction}set direction(e){this.layout.direction=e}get minimumSpacing(){return this.layout.minimumSpacing}set minimumSpacing(e){this.layout.minimumSpacing=e}get wrap(){return this.layout.wrap}set wrap(e){this.layout.wrap=e}get justifyContent(){return this.layout.justifyContent}set justifyContent(e){this.layout.justifyContent=e}get alignItems(){return this.layout.alignItems}set alignItems(e){this.layout.alignItems=e}get alignContent(){return this.layout.alignContent}set alignContent(e){this.layout.alignContent=e}get stretchType(){return this.layout.stretchType}set stretchType(e){this.layout.stretchType=e}get evenSizes(){return this.layout.evenSizes}set evenSizes(e){this.layout.evenSizes=e}onChildAdded(e){e.child.addClass(l)}onChildRemoved(e){e.child.removeClass(l)}onAfterAttach(e){super.onAfterAttach(e),this.fit()}}var s;t.FlexPanel=o,function(e){e.getGrow=function(e){return r.FlexLayout.getGrow(e)},e.setGrow=function(e,t){r.FlexLayout.setGrow(e,t)},e.getShrink=function(e){return r.FlexLayout.getShrink(e)},e.setShrink=function(e,t){r.FlexLayout.setShrink(e,t)},e.getSizeBasis=function(e){return r.FlexLayout.getSizeBasis(e)},e.setSizeBasis=function(e,t){r.FlexLayout.setSizeBasis(e,t)}}(o=t.FlexPanel||(t.FlexPanel={})),function(e){e.createLayout=function(e){return e.layout||new r.FlexLayout(e)}}(s||(s={}))}}]);